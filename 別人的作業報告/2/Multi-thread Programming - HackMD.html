<!DOCTYPE html>
<!-- saved from url=(0040)https://hackmd.io/@karta134033/r1Dwh9tuw -->
<html lang="zh-TW"><script async="" src="./Multi-thread Programming - HackMD_files/gtm.js.下載"></script><script id="allow-copy_script">(function agent() {
    let unlock = false
    document.addEventListener('allow_copy', (event) => {
      unlock = event.detail.unlock
    })

    const copyEvents = [
      'copy',
      'cut',
      'contextmenu',
      'selectstart',
      'mousedown',
      'mouseup',
      'mousemove',
      'keydown',
      'keypress',
      'keyup',
    ]
    const rejectOtherHandlers = (e) => {
      if (unlock) {
        e.stopPropagation()
        if (e.stopImmediatePropagation) e.stopImmediatePropagation()
      }
    }
    copyEvents.forEach((evt) => {
      document.documentElement.addEventListener(evt, rejectOtherHandlers, {
        capture: true,
      })
    })
  })()</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="csrf-token" content="RORxHmfL-eV8ZJhIvqmkEgqYnRvEDxpWASoI">
    
    
    <meta name="description" content="  # Multi-thread Programming &lt;style&gt; .aligncenter {     text-align: center; } img {   border: 1px so">
    
    <title>Multi-thread Programming - HackMD</title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
	<link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">
    
<script nonce="">
  window.domain = 'hackmd.io'
  window.urlpath = ''
  window.debug = false
  window.version = '1.3.0'
  window.brand = 'HackMD'

  
  window.NOTE_ID = 'vbbC7kysQGSL7JWLuDnzlA'
  

  window.GOOGLE_API_KEY = 'AIzaSyCjSrqWHhmWJnoI7JlD88XDSaBgiKbaenA'
  window.GOOGLE_CLIENT_ID = '911617723593-drikdibvvn63slfd6kbqigo8ql1no55s.apps.googleusercontent.com'
  window.DROPBOX_APP_KEY = 'rdoizrlnkuha23r'
  
  window.PLANTUML_SERVER = 'https://ptuml.hackmd.io'

  window.ASSET_URL = 'https://assets.hackmd.io'

  window.USER_CAN_CREATE_TEAM = true
  window.USER_CAN_DELETE_ACCOUNT = true
  window.USER_DELETE_ACCOUNT_VIA_EMAIL = true
  window.PAYMENT_ENABLED = true
  window.PAYMENT_PROMOTION_BANNER_ENABLED = false
  window.GITHUB_SYNC_ENABLED = true
  window.GITLAB_SYNC_ENABLED = false
  window.GITLAB_SYNC_BASE_URL = ''
  window.VCS_SYNC_MODE = 'github'
  window.VCS_PROVIDER_NAME = 'GitHub'
  window.FREE_TEAM_NUM = 20
  window.FREE_TEAM_MEMBER_NUM = 3
  window.FREE_PUBLIC_TEAM_NUM = 10
  
  window.EE_SITE_ENABLE = false
  window.EE_SITE_NAME = 'false'
  window.EE_SITE_LINK = 'false'
  window.EESITE_INFO = false
  window.ENTERPRISE_DISCOVERY_ENABLE = false
  window.ENTERPRISE_DISCOVERY_TEAM = true
  window.ENTERPRISE_DISCOVERY_NOTE = true
  window.ENTERPRISE_DISCOVERY_VIEW_PERMISSION = 'guest'
  
  window.ALLOW_ANONYMOUS = true
  window.ALLOW_ANONYMOUS_EDIT = false
  window.PUBLIC_OVERVIEW = false
  window.INTERNAL_PUBLIC_OVERVIEW = false
  window.FULL_TEXT_SEARCH_ENABLE = false
  window.ALGOLIA_SEARCH_ENABLE = true
  window.MARKETING_EMAIL_ENABLE = true
  
  
  window.API_MANAGEMENT_UI_ENABLE = true
  window.FEEDBACK_UI_ENABLE = true
  window.PUBLISH_ENABLE = true

  
  window.SHOW_HOT_NOTES = false
  

  
  window.HOT_NOTES_TIME_TYPE = 'week'
  

  
  window.SHOW_OVERVIEW = true
  

  
  window.MENTIONS = {}
  

  
  window.MENTION_ANCHORS = []
  

  
  window.COMMENT_ANCHORS = []
  

  
  window.IS_OWNER = false
  

  
  window.IS_TEAM_ADMIN = false
  

  

  
  window.USER_PROFILE = {"name":"楊子民","userpath":"sam1248105","photo":"https://graph.facebook.com/3226858230677250/picture?width=96","userid":"2c7be004-f01e-46bd-b2d6-7133e2372bb8"}
  

  
  window.VERSION_TIME = '1610262379638'
  

  
  window.canEdit = true
  

  
  window.canWriteComment = true
  
</script>


    
<!-- Google Tag Manager -->
<script nonce="">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KLW9Z3');</script>
<!-- End Google Tag Manager -->


    



<meta property="fb:app_id" content="1436904003272070">


    <meta name="twitter:image:src" content="https://lh3.googleusercontent.com/-8t6tJ5N_q9k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKpEqiLF5J4yGnqMw6Ckn2daGTog/photo.jpg">


<meta name="twitter:site" content="@hackmdio">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Multi-thread Programming - HackMD">


    <meta name="twitter:description" content="  # Multi-thread Programming &lt;style&gt; .aligncenter {     text-align: center; } img {   border: 1px so">



    <meta property="og:image" content="https://lh3.googleusercontent.com/-8t6tJ5N_q9k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKpEqiLF5J4yGnqMw6Ckn2daGTog/photo.jpg">


<meta property="og:site_name" content="HackMD">
<meta property="og:type" content="article">
<meta property="og:title" content="Multi-thread Programming - HackMD">


    <meta property="og:description" content="  # Multi-thread Programming &lt;style&gt; .aligncenter {     text-align: center; } img {   border: 1px so">


    <link rel="stylesheet" href="./Multi-thread Programming - HackMD_files/emojify.min.css">
     <link href="./Multi-thread Programming - HackMD_files/font-vendor.3af8242de4ff555af255.css" rel="stylesheet"><link href="./Multi-thread Programming - HackMD_files/common-vendor.3f50d6443fc55574a09d.css" rel="stylesheet"><link href="./Multi-thread Programming - HackMD_files/pretty-vendor.c152255c6001dfd89878.css" rel="stylesheet"><link href="./Multi-thread Programming - HackMD_files/pretty.ffde640da59ec7941712.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
<![endif]-->

<style id="googleidentityservice_button_styles" nonce="">.qJTHM{-webkit-user-select:none;color:#202124;direction:ltr;-webkit-touch-callout:none;font-family:"Roboto-Regular",arial,sans-serif;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;overflow:hidden;-webkit-text-size-adjust:100%}.ynRLnc{left:-9999px;position:absolute;top:-9999px}.L6cTce{display:none}.bltWBb{word-break:break-all}.hSRGPd{color:#1a73e8;cursor:pointer;font-weight:500;text-decoration:none}.Bz112c-W3lGp{height:16px;width:16px}.Bz112c-E3DyYd{height:20px;width:20px}.Bz112c-r9oPif{height:24px;width:24px}.Bz112c-uaxL4e{-webkit-border-radius:10px;border-radius:10px}.LgbsSe-Bz112c{display:block}.S9gUrf-YoZ4jf,.S9gUrf-YoZ4jf *{border:none;margin:0;padding:0}.fFW7wc-ibnC6b>.aZ2wEe>div{border-color:#4285f4}.P1ekSe-ZMv3u>div:nth-child(1){background-color:#1a73e8!important}.P1ekSe-ZMv3u>div:nth-child(2),.P1ekSe-ZMv3u>div:nth-child(3){background-image:linear-gradient(to right,rgba(255,255,255,.7),rgba(255,255,255,.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.haAclf{display:inline-block}.nsm7Bb-HzV7m-LgbsSe{-webkit-border-radius:4px;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:background-color .218s,border-color .218s;transition:background-color .218s,border-color .218s;-webkit-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dadce0;color:#3c4043;cursor:pointer;font-family:"Google Sans",arial,sans-serif;font-size:14px;height:40px;letter-spacing:0.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}@media screen and (-ms-high-contrast:active){.nsm7Bb-HzV7m-LgbsSe{border:2px solid windowText;color:windowText}}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe{font-size:14px;height:32px;letter-spacing:0.25px;padding:0 10px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe{font-size:11px;height:20px;letter-spacing:0.3px;padding:0 8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe{padding:0;width:40px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe{width:32px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe{width:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK{-webkit-border-radius:20px;border-radius:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.pSzOP-SxQuSe{-webkit-border-radius:16px;border-radius:16px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.purZT-SxQuSe{-webkit-border-radius:10px;border-radius:10px}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc{border:none;color:#fff}.nsm7Bb-HzV7m-LgbsSe.MFS4be-v3pZbf-Ia7Qfc{background-color:#1a73e8}.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{background-color:#202124;color:#e8eaed}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:18px;margin-right:8px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:14px;min-width:14px;width:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:10px;min-width:10px;width:10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin-left:8px;margin-right:-4px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:10px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:4px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:3px;border-top-left-radius:3px;-webkit-border-bottom-left-radius:3px;border-bottom-left-radius:3px;display:-webkit-box;display:-webkit-flex;display:flex;justify-content:center;-webkit-align-items:center;align-items:center;background-color:#fff;height:36px;margin-left:-10px;margin-right:12px;min-width:36px;width:36px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c,.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:28px;margin-left:-8px;margin-right:10px;min-width:28px;width:28px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:16px;margin-left:-6px;margin-right:8px;min-width:16px;width:16px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:3px;border-radius:3px;margin-left:2px;margin-right:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:14px;border-radius:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:8px;border-radius:8px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-bN97Pc-sM5MNb{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-flex-direction:row;flex-direction:row;justify-content:space-between;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;position:relative;width:100%}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX{justify-content:center}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:1;flex-grow:1;font-family:"Google Sans",arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-weight:300}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:0;flex-grow:0}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-MJoBVe{-webkit-transition:background-color .218s;transition:background-color .218s;bottom:0;left:0;position:absolute;right:0;top:0}.nsm7Bb-HzV7m-LgbsSe:hover,.nsm7Bb-HzV7m-LgbsSe:focus{-webkit-box-shadow:none;box-shadow:none;border-color:#d2e3fc;outline:none}.nsm7Bb-HzV7m-LgbsSe:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.04)}.nsm7Bb-HzV7m-LgbsSe:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.1)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.24)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.32)}.nsm7Bb-HzV7m-LgbsSe .n1UuX-DkfjY{-webkit-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:flex;height:20px;margin-left:-4px;margin-right:8px;min-width:20px;width:20px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-family:"Roboto";font-size:12px;text-align:left}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .ssJRIf,.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .fmcmS{overflow:hidden;text-overflow:ellipsis}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;color:#5f6368;fill:#5f6368;font-size:11px;font-weight:400}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#e8eaed;fill:#e8eaed}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .Bz112c{height:18px;margin:-3px -3px -3px 2px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:0;border-top-left-radius:0;-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-webkit-border-top-right-radius:3px;border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;border-bottom-right-radius:3px;margin-left:12px;margin-right:-10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.L5Fo6c-sM5MNb{border:0;display:block;left:0;position:relative;top:0}.L5Fo6c-bF1uUb{-webkit-border-radius:4px;border-radius:4px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.L5Fo6c-bF1uUb:focus{border:none;outline:none}sentinel{}</style><style>::-moz-focus-inner{border:0 !important;}:focus,.focus{outline: none !important;}</style><style></style><link rel="stylesheet" type="text/css" href="./Multi-thread Programming - HackMD_files/fretboard.26d5e78e694dfbd67fb7.css"><script charset="utf-8" src="./Multi-thread Programming - HackMD_files/MathJax.js.下載"></script><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script charset="utf-8" src="./Multi-thread Programming - HackMD_files/TeX-AMS_CHTML.js.下載"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><script charset="utf-8" src="./Multi-thread Programming - HackMD_files/Safe.js.下載"></script><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><link id="googleidentityservice" type="text/css" media="all" rel="stylesheet" href="./Multi-thread Programming - HackMD_files/style"><style type="text/css">.mjx-chtml {display: inline-block; line-height: 0; text-indent: 0; text-align: left; text-transform: none; font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; letter-spacing: normal; word-wrap: normal; word-spacing: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; margin: 0; padding: 1px 0}
.MJXc-display {display: block; text-align: center; margin: 1em 0; padding: 0}
.mjx-chtml[tabindex]:focus, body :focus .mjx-chtml[tabindex] {display: inline-table}
.mjx-full-width {text-align: center; display: table-cell!important; width: 10000em}
.mjx-math {display: inline-block; border-collapse: separate; border-spacing: 0}
.mjx-math * {display: inline-block; -webkit-box-sizing: content-box!important; -moz-box-sizing: content-box!important; box-sizing: content-box!important; text-align: left}
.mjx-numerator {display: block; text-align: center}
.mjx-denominator {display: block; text-align: center}
.MJXc-stacked {height: 0; position: relative}
.MJXc-stacked > * {position: absolute}
.MJXc-bevelled > * {display: inline-block}
.mjx-stack {display: inline-block}
.mjx-op {display: block}
.mjx-under {display: table-cell}
.mjx-over {display: block}
.mjx-over > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-under > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-stack > .mjx-sup {display: block}
.mjx-stack > .mjx-sub {display: block}
.mjx-prestack > .mjx-presup {display: block}
.mjx-prestack > .mjx-presub {display: block}
.mjx-delim-h > .mjx-char {display: inline-block}
.mjx-surd {vertical-align: top}
.mjx-mphantom * {visibility: hidden}
.mjx-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 2px 3px; font-style: normal; font-size: 90%}
.mjx-annotation-xml {line-height: normal}
.mjx-menclose > svg {fill: none; stroke: currentColor}
.mjx-mtr {display: table-row}
.mjx-mlabeledtr {display: table-row}
.mjx-mtd {display: table-cell; text-align: center}
.mjx-label {display: table-row}
.mjx-box {display: inline-block}
.mjx-block {display: block}
.mjx-span {display: inline}
.mjx-char {display: block; white-space: pre}
.mjx-itable {display: inline-table; width: auto}
.mjx-row {display: table-row}
.mjx-cell {display: table-cell}
.mjx-table {display: table; width: 100%}
.mjx-line {display: block; height: 0}
.mjx-strut {width: 0; padding-top: 1em}
.mjx-vsize {width: 0}
.MJXc-space1 {margin-left: .167em}
.MJXc-space2 {margin-left: .222em}
.MJXc-space3 {margin-left: .278em}
.mjx-chartest {display: block; visibility: hidden; position: absolute; top: 0; line-height: normal; font-size: 500%}
.mjx-chartest .mjx-char {display: inline}
.mjx-chartest .mjx-box {padding-top: 1000px}
.MJXc-processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MJXc-processed {display: none}
.mjx-test {font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow: hidden; height: 1px}
.mjx-test.mjx-test-display {display: table!important}
.mjx-test.mjx-test-inline {display: inline!important; margin-right: -1px}
.mjx-test.mjx-test-default {display: block!important; clear: both}
.mjx-ex-box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60ex}
.mjx-test-inline .mjx-left-box {display: inline-block; width: 0; float: left}
.mjx-test-inline .mjx-right-box {display: inline-block; width: 0; float: right}
.mjx-test-display .mjx-right-box {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
#MathJax_CHTML_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.mjx-chtml .mjx-noError {line-height: 1.2; vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
.MJXc-TeX-unknown-R {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: normal; font-weight: normal}
.MJXc-TeX-unknown-I {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: italic; font-weight: normal}
.MJXc-TeX-unknown-B {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: normal; font-weight: bold}
.MJXc-TeX-unknown-BI {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: italic; font-weight: bold}
.MJXc-TeX-ams-R {font-family: MJXc-TeX-ams-R,MJXc-TeX-ams-Rw}
.MJXc-TeX-cal-B {font-family: MJXc-TeX-cal-B,MJXc-TeX-cal-Bx,MJXc-TeX-cal-Bw}
.MJXc-TeX-frak-R {font-family: MJXc-TeX-frak-R,MJXc-TeX-frak-Rw}
.MJXc-TeX-frak-B {font-family: MJXc-TeX-frak-B,MJXc-TeX-frak-Bx,MJXc-TeX-frak-Bw}
.MJXc-TeX-math-BI {font-family: MJXc-TeX-math-BI,MJXc-TeX-math-BIx,MJXc-TeX-math-BIw}
.MJXc-TeX-sans-R {font-family: MJXc-TeX-sans-R,MJXc-TeX-sans-Rw}
.MJXc-TeX-sans-B {font-family: MJXc-TeX-sans-B,MJXc-TeX-sans-Bx,MJXc-TeX-sans-Bw}
.MJXc-TeX-sans-I {font-family: MJXc-TeX-sans-I,MJXc-TeX-sans-Ix,MJXc-TeX-sans-Iw}
.MJXc-TeX-script-R {font-family: MJXc-TeX-script-R,MJXc-TeX-script-Rw}
.MJXc-TeX-type-R {font-family: MJXc-TeX-type-R,MJXc-TeX-type-Rw}
.MJXc-TeX-cal-R {font-family: MJXc-TeX-cal-R,MJXc-TeX-cal-Rw}
.MJXc-TeX-main-B {font-family: MJXc-TeX-main-B,MJXc-TeX-main-Bx,MJXc-TeX-main-Bw}
.MJXc-TeX-main-I {font-family: MJXc-TeX-main-I,MJXc-TeX-main-Ix,MJXc-TeX-main-Iw}
.MJXc-TeX-main-R {font-family: MJXc-TeX-main-R,MJXc-TeX-main-Rw}
.MJXc-TeX-math-I {font-family: MJXc-TeX-math-I,MJXc-TeX-math-Ix,MJXc-TeX-math-Iw}
.MJXc-TeX-size1-R {font-family: MJXc-TeX-size1-R,MJXc-TeX-size1-Rw}
.MJXc-TeX-size2-R {font-family: MJXc-TeX-size2-R,MJXc-TeX-size2-Rw}
.MJXc-TeX-size3-R {font-family: MJXc-TeX-size3-R,MJXc-TeX-size3-Rw}
.MJXc-TeX-size4-R {font-family: MJXc-TeX-size4-R,MJXc-TeX-size4-Rw}
.MJXc-TeX-vec-R {font-family: MJXc-TeX-vec-R,MJXc-TeX-vec-Rw}
.MJXc-TeX-vec-B {font-family: MJXc-TeX-vec-B,MJXc-TeX-vec-Bx,MJXc-TeX-vec-Bw}
@font-face {font-family: MJXc-TeX-ams-R; src: local('MathJax_AMS'), local('MathJax_AMS-Regular')}
@font-face {font-family: MJXc-TeX-ams-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_AMS-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-B; src: local('MathJax_Caligraphic Bold'), local('MathJax_Caligraphic-Bold')}
@font-face {font-family: MJXc-TeX-cal-Bx; src: local('MathJax_Caligraphic'); font-weight: bold}
@font-face {font-family: MJXc-TeX-cal-Bw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Bold.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Bold.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-R; src: local('MathJax_Fraktur'), local('MathJax_Fraktur-Regular')}
@font-face {font-family: MJXc-TeX-frak-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-B; src: local('MathJax_Fraktur Bold'), local('MathJax_Fraktur-Bold')}
@font-face {font-family: MJXc-TeX-frak-Bx; src: local('MathJax_Fraktur'); font-weight: bold}
@font-face {font-family: MJXc-TeX-frak-Bw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Bold.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Bold.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-BI; src: local('MathJax_Math BoldItalic'), local('MathJax_Math-BoldItalic')}
@font-face {font-family: MJXc-TeX-math-BIx; src: local('MathJax_Math'); font-weight: bold; font-style: italic}
@font-face {font-family: MJXc-TeX-math-BIw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Math-BoldItalic.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Math-BoldItalic.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Math-BoldItalic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-R; src: local('MathJax_SansSerif'), local('MathJax_SansSerif-Regular')}
@font-face {font-family: MJXc-TeX-sans-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-B; src: local('MathJax_SansSerif Bold'), local('MathJax_SansSerif-Bold')}
@font-face {font-family: MJXc-TeX-sans-Bx; src: local('MathJax_SansSerif'); font-weight: bold}
@font-face {font-family: MJXc-TeX-sans-Bw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Bold.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Bold.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-I; src: local('MathJax_SansSerif Italic'), local('MathJax_SansSerif-Italic')}
@font-face {font-family: MJXc-TeX-sans-Ix; src: local('MathJax_SansSerif'); font-style: italic}
@font-face {font-family: MJXc-TeX-sans-Iw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Italic.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Italic.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-script-R; src: local('MathJax_Script'), local('MathJax_Script-Regular')}
@font-face {font-family: MJXc-TeX-script-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Script-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Script-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-type-R; src: local('MathJax_Typewriter'), local('MathJax_Typewriter-Regular')}
@font-face {font-family: MJXc-TeX-type-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Typewriter-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Typewriter-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Typewriter-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-R; src: local('MathJax_Caligraphic'), local('MathJax_Caligraphic-Regular')}
@font-face {font-family: MJXc-TeX-cal-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-B; src: local('MathJax_Main Bold'), local('MathJax_Main-Bold')}
@font-face {font-family: MJXc-TeX-main-Bx; src: local('MathJax_Main'); font-weight: bold}
@font-face {font-family: MJXc-TeX-main-Bw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Main-Bold.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-I; src: local('MathJax_Main Italic'), local('MathJax_Main-Italic')}
@font-face {font-family: MJXc-TeX-main-Ix; src: local('MathJax_Main'); font-style: italic}
@font-face {font-family: MJXc-TeX-main-Iw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Main-Italic.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-R; src: local('MathJax_Main'), local('MathJax_Main-Regular')}
@font-face {font-family: MJXc-TeX-main-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Main-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-I; src: local('MathJax_Math Italic'), local('MathJax_Math-Italic')}
@font-face {font-family: MJXc-TeX-math-Ix; src: local('MathJax_Math'); font-style: italic}
@font-face {font-family: MJXc-TeX-math-Iw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Math-Italic.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size1-R; src: local('MathJax_Size1'), local('MathJax_Size1-Regular')}
@font-face {font-family: MJXc-TeX-size1-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Size1-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size2-R; src: local('MathJax_Size2'), local('MathJax_Size2-Regular')}
@font-face {font-family: MJXc-TeX-size2-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Size2-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size3-R; src: local('MathJax_Size3'), local('MathJax_Size3-Regular')}
@font-face {font-family: MJXc-TeX-size3-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Size3-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size4-R; src: local('MathJax_Size4'), local('MathJax_Size4-Regular')}
@font-face {font-family: MJXc-TeX-size4-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Size4-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-R; src: local('MathJax_Vector'), local('MathJax_Vector-Regular')}
@font-face {font-family: MJXc-TeX-vec-Rw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Regular.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Regular.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-B; src: local('MathJax_Vector Bold'), local('MathJax_Vector-Bold')}
@font-face {font-family: MJXc-TeX-vec-Bx; src: local('MathJax_Vector'); font-weight: bold}
@font-face {font-family: MJXc-TeX-vec-Bw; src /*1*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Bold.eot'); src /*2*/: url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Bold.woff') format('woff'), url('https://assets.hackmd.io/build/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Bold.otf') format('opentype')}
</style></head>

<body style="" data-new-gr-c-s-check-loaded="14.1089.0" data-gr-ext-installed=""><div id="MathJax_Message" style="display: none;"></div>
    <div class="ui-infobar container-fluid unselectable hidden-print comment-enabled">
        <div class="row">
            <div class="col-xs-12 ui-infobar-inner">
                <div class="ui-infobar__user-info">
                    <ul class="list-inline h-[28px] mb-0">
                        <li>
                            <div class="flex text-4 gap-[9px]">
                                
                                    <span class="flex items-center justify-center ui-owner" data-profile="karta134033">
                                         <a class="ui-user-icon m-0 inline-block w-[28px] h-[28px] user-card-popover" style="background-image: url(https://lh3.googleusercontent.com/-8t6tJ5N_q9k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKpEqiLF5J4yGnqMw6Ckn2daGTog/photo.jpg);" target="_blank" href="https://hackmd.io/@karta134033" data-toggle="popover" data-original-title="" title=""></a>
                                    </span>
                                

                                <div class="flex flex-col items-start">
                                    
                                        <a class="font-bold text-gray-900 cursor-pointer ui-owner hover:underline user-card-popover" data-profile="karta134033" href="https://hackmd.io/@karta134033" data-toggle="popover" data-original-title="" title="">
                                            karta134033
                                        </a>
                                    


                                    <div class="flex">
                                        <div>
                                            <span class="ui-status-lastchange" title="2021年1月10日星期日 15:06">變更於 2 年前</span>
                                            <span class="ui-lastchange" data-createtime="1604066398702" data-updatetime="1610262379638"></span>
                                        </div>

                                        
                                            <a class="text-gray-400 hover:text-gray-400 focus:text-gray-400 ml-2.5" data-toggle="popover" data-placement="bottom" data-html="true" data-content="&lt;i class=&quot;fa fa-globe mr-1&quot; aria-hidden=&quot;true&quot; style=&quot;margin-top: 1px;&quot;&gt;&lt;/i&gt;公開筆記" data-trigger="focus" role="button" tabindex="0" data-original-title="" title="">
                                                <i class="fa fa-fw fa-globe" aria-hidden="true"></i>
                                            </a>
                                        

                                        <span class="ml-1 text-gray-400 ui-more-info hmd-dn" data-toggle="popover" data-original-title="" title="">
                                             <i class="fa fa-fw align-middle ui-connectedGithubIcon fa-github"></i>

                                            <div class="more-info-raw hmd-dn">
                                                <span class="ui-connectedGithub note-status-row hmd-dn">
                                                    <i class="fa ui-connectedGithubIcon fa-github"></i>
                                                    <a class="text-gray-600 ui-synced-text hover:text-gray-600 focus:text-gray-600">與 GitHub 同步</a>

                                                    
                                                </span>
                                            </div>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="items-center hmd-text-right ui-infobar__actions">
                    <ul class="mb-0 list-inline">
                        <li>
                            
                                <span class="community-button ui-like hidden-xs" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="讚賞">
                                    <i class="fa fa-fw"></i>
                                    <span class="count"></span>
                                </span>

                                <span class="community-button ui-bookmark hidden-xs" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="收藏">
                                    <i class="fa fa-fw"></i>
                                </span>

                                
                                    <div class="ui-notification dropdown ">
                                        <span id="notificationLabel" class="ui--subscribed hidden-xs" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                            <div class="ui-notification-status community-button" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="訂閱">
                                                <i class="fa fa-fw fa-bell"></i>
                                            </div>
                                        </span>

                                        <ul class="dropdown-menu" aria-labelledby="notificationLabel">
                                            <li class="ui-notification-watch notification-menu-item ">
                                                <i class="fa fa-check fa-fw"></i>
                                                <i class="fa fa-bell fa-fw"></i>
                                                <div class="info">
                                                    <div class="title">
                                                        所有通知
                                                    </div>
                                                    <div class="description">
                                                        當有任何變更時將會收到通知
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="ui-notification-mention notification-menu-item ">
                                                <i class="fa fa-check fa-fw"></i>
                                                <i class="fa fa-at fa-fw"></i>
                                                <div class="info">
                                                    <div class="title">
                                                        提及我
                                                    </div>
                                                    <div class="description">
                                                        當有人提及我時才會收到通知
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="divider"></li>
                                            <!--
                                                <li class="ui-notification-list notification-menu-item"><span><a href="#"><i class="fa fa-list-ul fa-fw"></i>我的訂閱列表</a></span></li>
                                            -->
                                            <li class="ui-notification-unsubscribe notification-menu-item"><i class="fa fa-bell-slash-o fa-fw"></i>取消訂閱</li>
                                        </ul>
                                        <span class="ui-notification-subscribe community-button hidden-xs" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="訂閱">
                                            <i class="fa fa-fw fa-bell-o"></i>
                                        </span>
                                    </div>
                                
                            
                        </li>

                        
                            <li>
                                <a href="https://hackmd.io/@karta134033/r1Dwh9tuw/edit?both" class="ui-edit btn btn-default btn-md"><i class="fa fa-pencil"></i> <span class="hidden-xs" style="margin-left: 3px">編輯</span></a>
                            </li>
                        
                    </ul>
                </div>

                <div class="clearfix"></div>
            </div>
        </div>
        
        <div class="ui-comment-app" id="hackmd-app" style="right: -45px; width: 45px;">
            <div id="comment-app"><div class="open-comments"><div><button class="ui-open-comments btn btn-default"><i class="fa fa-commenting" aria-hidden="true"></i><span class="text">0 篇留言</span></button></div><div style="display: none;"><div class="comment-settings" id="comment-settings"><img src="./Multi-thread Programming - HackMD_files/comments-settings.svg" style="margin-right: 5px;"><div>留言設定</div></div></div></div><div class="comments-scroller"><div class="comments-containers"></div></div></div>
        </div>
        
    </div>

    <!-- Markdown rendered container -->
    <div id="doc" class="container-fluid markdown-body comment-enabled" data-hard-breaks="true"><h1 class="part" data-startline="5" data-endline="5" id="Multi-thread-Programming" data-id="Multi-thread-Programming"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#Multi-thread-Programming" title="Multi-thread-Programming" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="24" data-size="24">Multi-thread Programming</span></h1><style>
.aligncenter {
    text-align: center;
}
img {
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 5px;  
}
</style><h2 class="part" data-startline="16" data-endline="16" id="Q1" data-id="Q1"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q1" title="Q1" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="184" data-size="2">Q1</span></h2><blockquote class="part" data-startline="17" data-endline="17">
<p data-position="189" data-size="0"><span data-position="189" data-size="411">In your write-up, produce a graph of speedup compared to the reference sequential implementation as a function of the number of threads used FOR VIEW 1. Is speedup linear in the number of threads used? In your writeup hypothesize why this is (or is not) the case? (You may also wish to produce a graph for VIEW 2 to help you come up with a good answer. Hint: take a careful look at the three-thread data-point.)</span></p>
</blockquote><p class="part" data-startline="19" data-endline="19" data-position="602" data-size="0"><span data-position="602" data-size="28">多執行緒的簡單實作方法Block Partition如下</span></p><pre class="part" data-startline="20" data-endline="31" data-position="631"><code class="cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span></div><div class="code"><span class="token keyword">void</span> <span class="token function">workerThreadStart</span><span class="token punctuation">(</span>WorkerArgs <span class="token operator">*</span><span class="token keyword">const</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> part <span class="token operator">=</span> args<span class="token operator">-&gt;</span>height <span class="token operator">/</span> args<span class="token operator">-&gt;</span>numThreads<span class="token punctuation">;</span>
    <span class="token keyword">int</span> start <span class="token operator">=</span> args<span class="token operator">-&gt;</span>threadId <span class="token operator">*</span> part<span class="token punctuation">;</span>
    <span class="token function">mandelbrotSerial</span><span class="token punctuation">(</span>
        args<span class="token operator">-&gt;</span>x0<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>y0<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>x1<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>y1<span class="token punctuation">,</span> 
        args<span class="token operator">-&gt;</span>width<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>height<span class="token punctuation">,</span> start<span class="token punctuation">,</span> part<span class="token punctuation">,</span> 
        args<span class="token operator">-&gt;</span>maxIterations<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>output
    <span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span>
</div></div></code></pre><p class="part" data-startline="32" data-endline="32" data-position="953" data-size="0"><span data-position="953" data-size="110">將總執行次數(預設為:1200)切分給數個threads執行，如: 2個threads會切分為[0~599, 599~1199], 3個threads會切分為[0~399, 400~799, 800~1199] 以此類推</span></p><h3 class="part" data-startline="34" data-endline="34" id="–-分析-–" data-id="–-分析-–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93-%E5%88%86%E6%9E%90-%E2%80%93" title="–-分析-–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="1070" data-size="8">– 分析 –</span></h3><p class="part" data-startline="35" data-endline="35" data-position="1079" data-size="0"><span data-position="1079" data-size="53">實測預設結果(2個threads)可以發現確實有達到平行化加速的效果，加快了接近兩倍的時間(1.95倍)。</span></p><pre class="part" data-startline="36" data-endline="42" data-position="1133"><code class="s hljs">[mandelbrot serial]:            [<span class="hljs-number">460.379</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>serial.ppm
[mandelbrot thread]:            [<span class="hljs-number">236.624</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>thread.ppm
                                (<span class="hljs-number">1</span>.95x speedup <span class="hljs-keyword">from</span> <span class="hljs-number">2</span> threads)
</code></pre><p class="part" data-startline="44" data-endline="44" data-position="1374" data-size="0"><span data-position="1374" data-size="35">然而當切換到3個threads的時候速度居然比2個threads還慢!</span></p><pre class="part" data-startline="45" data-endline="51" data-position="1410"><code class="s hljs">[mandelbrot serial]:            [<span class="hljs-number">460.489</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>serial.ppm
[mandelbrot thread]:            [<span class="hljs-number">282.625</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>thread.ppm
                                (<span class="hljs-number">1</span>.63x speedup <span class="hljs-keyword">from</span> <span class="hljs-number">3</span> threads)
</code></pre><p class="part" data-startline="52" data-endline="52" data-position="1650" data-size="0"><span data-position="1650" data-size="47">切到4個threads看起來又變正常了，不過4個threads卻只有達到2.38倍左右的加速。</span></p><pre class="part" data-startline="53" data-endline="59" data-position="1698"><code class="s hljs">[mandelbrot serial]:            [<span class="hljs-number">460.490</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>serial.ppm
[mandelbrot thread]:            [<span class="hljs-number">193.409</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>thread.ppm
                                (<span class="hljs-number">2</span>.38x speedup <span class="hljs-keyword">from</span> <span class="hljs-number">4</span> threads)
</code></pre><h4 class="part" data-startline="61" data-endline="61" id="圖一" data-id="圖一"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E5%9C%96%E4%B8%80" title="圖一" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="1944" data-size="2">圖一</span></h4><p class="part" data-startline="62" data-endline="63" data-position="1947" data-size="0"><img src="./Multi-thread Programming - HackMD_files/9p2Fuue.png" alt="" class="" data-position="1947" data-size="36" loading="lazy"><br>
<span data-position="1984" data-size="36">執行結果的圖表如上，可以明顯觀察到結果並非線性，且離理想目標有一段距離。</span></p><h3 class="part" data-startline="66" data-endline="66" id="–檢視程式碼–" data-id="–檢視程式碼–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%AA%A2%E8%A6%96%E7%A8%8B%E5%BC%8F%E7%A2%BC%E2%80%93" title="–檢視程式碼–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="2027" data-size="9">–檢視程式碼–</span></h3><p class="part" data-startline="67" data-endline="67" data-position="2037" data-size="0"><span data-position="2037" data-size="15">因為每一個thread都會呼叫</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-1-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-1" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-2" class="mjx-mrow"><span id="MJXc-Node-3" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-4" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-5" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-6" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-7" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-8" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-9" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">b</span></span><span id="MJXc-Node-10" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-11" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-12" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-13" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-14" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-15" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-16" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-17" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-18" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-19" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-20" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mi>b</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">mandelbrotSerial()</script></span><span data-position="2072" data-size="12">這支function，而</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-2-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-21" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-22" class="mjx-mrow"><span id="MJXc-Node-23" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-24" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-25" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-26" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-27" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-28" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-29" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">b</span></span><span id="MJXc-Node-30" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-31" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-32" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-33" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-34" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-35" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-36" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-37" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-38" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-39" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-40" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mi>b</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-2">mandelbrotSerial()</script></span><span data-position="2104" data-size="12">又會再for迴圈裡呼叫到</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-3-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-41" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-42" class="mjx-mrow"><span id="MJXc-Node-43" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-44" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-45" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-46" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-47" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-48" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-49" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-50" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-3">mandel()</script></span><span data-position="2126" data-size="63">這支function，這兩個function極有可能是thread加速無法達到極速的瓶頸，以下分別探討這兩個function。</span></p><ol class="part" data-startline="68" data-endline="120" data-position="2190" data-size="0">
<li class="" data-startline="68" data-endline="96" data-position="2193" data-size="0">
<p data-position="2190" data-size="0"><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-4-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-51" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-52" class="mjx-mrow"><span id="MJXc-Node-53" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-54" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-55" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-56" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-57" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-58" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-59" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">b</span></span><span id="MJXc-Node-60" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-61" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-62" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-63" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-64" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-65" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-66" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-67" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-68" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-69" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-70" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mi>b</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-4">mandelbrotSerial()</script></span></p>
<pre><code class="cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span></div><div class="code"><span class="token keyword">void</span> <span class="token function">mandelbrotSerial</span><span class="token punctuation">(</span>
    <span class="token keyword">float</span> x0<span class="token punctuation">,</span> <span class="token keyword">float</span> y0<span class="token punctuation">,</span> <span class="token keyword">float</span> x1<span class="token punctuation">,</span> <span class="token keyword">float</span> y1<span class="token punctuation">,</span>
    <span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">,</span>
    <span class="token keyword">int</span> startRow<span class="token punctuation">,</span> <span class="token keyword">int</span> totalRows<span class="token punctuation">,</span>
    <span class="token keyword">int</span> maxIterations<span class="token punctuation">,</span>
    <span class="token keyword">int</span> output<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">float</span> dx <span class="token operator">=</span> <span class="token punctuation">(</span>x1 <span class="token operator">-</span> x0<span class="token punctuation">)</span> <span class="token operator">/</span> width<span class="token punctuation">;</span>
  <span class="token keyword">float</span> dy <span class="token operator">=</span> <span class="token punctuation">(</span>y1 <span class="token operator">-</span> y0<span class="token punctuation">)</span> <span class="token operator">/</span> height<span class="token punctuation">;</span>

  <span class="token keyword">int</span> endRow <span class="token operator">=</span> startRow <span class="token operator">+</span> totalRows<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> startRow<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> endRow<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">float</span> x <span class="token operator">=</span> x0 <span class="token operator">+</span> i <span class="token operator">*</span> dx<span class="token punctuation">;</span>
      <span class="token keyword">float</span> y <span class="token operator">=</span> y0 <span class="token operator">+</span> j <span class="token operator">*</span> dy<span class="token punctuation">;</span>

      <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token punctuation">(</span>j <span class="token operator">*</span> width <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      output<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mandel</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> maxIterations<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</div></div></code></pre>
<p data-position="2837" data-size="0"><span data-position="2841" data-size="18">由程式的第13行與第15行可以得知，</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-5-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-71" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-72" class="mjx-mrow"><span id="MJXc-Node-73" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-74" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-75" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-76" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-77" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-78" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-79" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">b</span></span><span id="MJXc-Node-80" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-81" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-82" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-83" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-84" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-85" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-86" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-87" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-88" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-89" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-90" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mi>b</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-5">mandelbrotSerial()</script></span><span data-position="2879" data-size="97">僅會依據startRow與endRow變動迴圈執行的次數，而每個thread所切分到的執行大小是一樣的，理論上應該達到平行的加速與threads數成正比的結果，但再仔細看會發現有一個變因，那就是</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-6-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-91" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-92" class="mjx-mrow"><span id="MJXc-Node-93" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-94" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-95" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-96" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-97" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-98" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-99" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-100" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-6">mandel()</script></span><span data-position="2986" data-size="11">這支function。</span></p>
</li>
<li class="" data-startline="97" data-endline="120" data-position="3006" data-size="0">
<p data-position="3003" data-size="0"><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-7-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-101" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-102" class="mjx-mrow"><span id="MJXc-Node-103" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-104" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-105" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-106" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-107" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-108" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-109" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-110" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-7">mandel()</script></span></p>
<pre><code class="cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span></div><div class="code"><span class="token keyword">static</span> <span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">mandel</span><span class="token punctuation">(</span><span class="token keyword">float</span> c_re<span class="token punctuation">,</span> <span class="token keyword">float</span> c_im<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">float</span> z_re <span class="token operator">=</span> c_re<span class="token punctuation">,</span> z_im <span class="token operator">=</span> c_im<span class="token punctuation">;</span>
  <span class="token keyword">int</span> i<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>z_re <span class="token operator">*</span> z_re <span class="token operator">+</span> z_im <span class="token operator">*</span> z_im <span class="token operator">&gt;</span> <span class="token number">4.f</span><span class="token punctuation">)</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>

    <span class="token keyword">float</span> new_re <span class="token operator">=</span> z_re <span class="token operator">*</span> z_re <span class="token operator">-</span> z_im <span class="token operator">*</span> z_im<span class="token punctuation">;</span>
    <span class="token keyword">float</span> new_im <span class="token operator">=</span> <span class="token number">2.f</span> <span class="token operator">*</span> z_re <span class="token operator">*</span> z_im<span class="token punctuation">;</span>
    z_re <span class="token operator">=</span> c_re <span class="token operator">+</span> new_re<span class="token punctuation">;</span>
    z_im <span class="token operator">=</span> c_im <span class="token operator">+</span> new_im<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>   
</div></div></code></pre>
<p data-position="3450" data-size="0"><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-8-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-111" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-112" class="mjx-mrow"><span id="MJXc-Node-113" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-114" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-115" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-116" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-117" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-118" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-119" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-120" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-8">mandel()</script></span><span data-position="3464" data-size="54">會帶入三個參數分別為c_re, c_im, count，其中count會決定迴圈的執行次數，且count的傳入是</span><strong data-position="3520" data-size="0"><span data-position="3522" data-size="2">固定</span></strong><span data-position="3526" data-size="22">的，因此可以先排除count對平行化的影響。</span><br>
<span data-position="3550" data-size="12">仔細看迴圈內的內容會發現</span><strong data-position="3566" data-size="0"><span data-position="3564" data-size="14">第8行可能是影響平行化的關鍵</span></strong><span data-position="3580" data-size="9">，因為只要符合這個</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-9-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-121" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-122" class="mjx-mrow"><span id="MJXc-Node-123" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-124" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.501em; padding-right: 0.06em;">f</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mi>f</mi></math></span></span><script type="math/tex" id="MathJax-Element-9">if</script></span><span data-position="3593" data-size="37">的條件即可跳脫迴圈而要構成此條件的關鍵就在我們傳入的參數c_re和 c_im。</span></p>
</li>
</ol><h3 class="part" data-startline="121" data-endline="121" id="–檢視Thread的瓶頸–" data-id="–檢視Thread的瓶頸–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%AA%A2%E8%A6%96Thread%E7%9A%84%E7%93%B6%E9%A0%B8%E2%80%93" title="–檢視Thread的瓶頸–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="3641" data-size="15">–檢視Thread的瓶頸–</span></h3><p class="part" data-startline="122" data-endline="122" data-position="3657" data-size="0"><span data-position="3657" data-size="2">利用</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-10-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-125" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-126" class="mjx-mrow"><span id="MJXc-Node-127" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.045em;">C</span></span><span id="MJXc-Node-128" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.501em; padding-right: 0.006em;">y</span></span><span id="MJXc-Node-129" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">c</span></span><span id="MJXc-Node-130" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-131" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-132" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-133" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-134" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-135" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-136" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-137" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.163em; padding-bottom: 0.335em;">.</span></span><span id="MJXc-Node-138" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mi>y</mi><mi>c</mi><mi>l</mi><mi>e</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>r</mi><mo>.</mo><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-10">CycleTimer.h</script></span><span data-position="3673" data-size="24">給的方法來計算看看各個thread所消耗的時間，</span></p><p class="part" data-startline="124" data-endline="124" data-position="3699" data-size="0"><em data-position="3699" data-size="0"><strong data-position="3699" data-size="0"><span data-position="3702" data-size="10">FOR VIEW 1</span></strong></em></p><ul class="part" data-startline="125" data-endline="216">
<li class="" data-startline="125" data-endline="147" data-position="3718" data-size="0">
<p data-position="3716" data-size="0"><span data-position="3718" data-size="9">2 Threads</span></p>
<pre><code class="s hljs">thread0 takes [<span class="hljs-number">236.088</span>] ms
thread1 takes [<span class="hljs-number">236.933</span>] ms
<span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-operator">-</span>
thread0 takes [<span class="hljs-number">235.866</span>] ms
thread1 takes [<span class="hljs-number">236.935</span>] ms
<span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-operator">-</span>
thread0 takes [<span class="hljs-number">236.008</span>] ms
thread1 takes [<span class="hljs-number">237.145</span>] ms
<span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-operator">-</span>
thread0 takes [<span class="hljs-number">235.585</span>] ms
thread1 takes [<span class="hljs-number">236.732</span>] ms
<span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-operator">-</span>
thread0 takes [<span class="hljs-number">235.712</span>] ms
thread1 takes [<span class="hljs-number">236.861</span>] ms
<span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-operator">-</span>
[mandelbrot thread]:            [<span class="hljs-number">236.959</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>thread.ppm
                        (<span class="hljs-number">1</span>.95x speedup <span class="hljs-keyword">from</span> <span class="hljs-number">2</span> threads)
</code></pre>
<p data-position="4246" data-size="0"><span data-position="4250" data-size="20">兩個thread之間執行的時間是差不多的</span></p>
</li>
<li class="" data-startline="148" data-endline="176" data-position="4274" data-size="0">
<p data-position="4272" data-size="0"><span data-position="4274" data-size="9">3 Threads</span></p>
<pre><code class="s hljs">thread0 takes [<span class="hljs-number">93.499</span>] ms
thread2 takes [<span class="hljs-number">93.752</span>] ms
thread1 takes [<span class="hljs-number">282.856</span>] ms  #
---
thread0 takes [<span class="hljs-number">93.187</span>] ms
thread2 takes [<span class="hljs-number">93.796</span>] ms
thread1 takes [<span class="hljs-number">282.777</span>] ms  #
---
thread0 takes [<span class="hljs-number">93.182</span>] ms
thread2 takes [<span class="hljs-number">93.832</span>] ms
thread1 takes [<span class="hljs-number">282.866</span>] ms  #
---
thread0 takes [<span class="hljs-number">93.308</span>] ms
thread2 takes [<span class="hljs-number">93.910</span>] ms
thread1 takes [<span class="hljs-number">282.756</span>] ms  #
---
thread0 takes [<span class="hljs-number">93.201</span>] ms
thread2 takes [<span class="hljs-number">93.805</span>] ms
thread1 takes [<span class="hljs-number">282.893</span>] ms  #
---
[mandelbrot thread]:            [<span class="hljs-number">282.873</span>] ms 
<span class="hljs-symbol">Wrote</span> image file mandelbrot-thread.ppm
                        (<span class="hljs-number">1.63</span>x speedup from <span class="hljs-number">3</span> threads)
</code></pre>
<p data-position="4963" data-size="0"><span data-position="4967" data-size="27">可以發現thread1是造成程式無法最佳化平行的瓶頸!</span><br>
<span data-position="4997" data-size="41">代表說以原本的切分方式去執行會使位在中間切分部分的區域(thread1)產生瓶頸。</span></p>
</li>
<li class="" data-startline="177" data-endline="216" data-position="5044" data-size="0">
<p data-position="5042" data-size="0"><span data-position="5044" data-size="9">4 Threads</span></p>
<pre><code class="s hljs">thread0 takes [<span class="hljs-number">45.501</span>] ms
thread3 takes [<span class="hljs-number">45.922</span>] ms
thread1 takes [<span class="hljs-number">193.004</span>] ms  #
thread2 takes [<span class="hljs-number">193.596</span>] ms  #
---
thread0 takes [<span class="hljs-number">45.571</span>] ms
thread3 takes [<span class="hljs-number">46.019</span>] ms
thread1 takes [<span class="hljs-number">192.590</span>] ms  #
thread2 takes [<span class="hljs-number">193.342</span>] ms  #
---
thread0 takes [<span class="hljs-number">45.438</span>] ms
thread3 takes [<span class="hljs-number">45.912</span>] ms
thread1 takes [<span class="hljs-number">192.931</span>] ms  #
thread2 takes [<span class="hljs-number">193.594</span>] ms  #
---
thread0 takes [<span class="hljs-number">45.514</span>] ms
thread3 takes [<span class="hljs-number">45.940</span>] ms
thread1 takes [<span class="hljs-number">192.657</span>] ms  #
thread2 takes [<span class="hljs-number">193.424</span>] ms  #
---
thread0 takes [<span class="hljs-number">45.551</span>] ms
thread3 takes [<span class="hljs-number">45.926</span>] ms
thread1 takes [<span class="hljs-number">192.766</span>] ms  #
thread2 takes [<span class="hljs-number">193.549</span>] ms  #
---
[mandelbrot thread]:            [<span class="hljs-number">193.472</span>] ms
<span class="hljs-symbol">Wrote</span> image file mandelbrot-thread.ppm
                        (<span class="hljs-number">2.38</span>x speedup from <span class="hljs-number">4</span> threads)
</code></pre>
<p data-position="5902" data-size="0"><span data-position="5906" data-size="2">根據</span><em data-position="5908" data-size="0"><span data-position="5909" data-size="9">3 Threads</span></em><span data-position="5919" data-size="10">的結果我們可以發現在</span><em data-position="5929" data-size="0"><span data-position="5930" data-size="9">4 Threads</span></em><span data-position="5940" data-size="25">有一樣的問題，在中間切分部分的區域產生瓶頸，代表在</span><em data-position="5965" data-size="0"><strong data-position="5965" data-size="0"><span data-position="5968" data-size="6">VIEW 1</span></strong></em><span data-position="5977" data-size="30">時中間區段帶入的x, y會耗費大部分時間(相比於前、後段)在</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-11-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-139" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-140" class="mjx-mrow"><span id="MJXc-Node-141" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-142" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-143" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-144" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-145" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-146" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-147" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-148" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-11">mandel()</script></span><span data-position="6017" data-size="3">迭代。</span></p>
<h4 class="" id="–檢視圖片–" data-id="–檢視圖片–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%AA%A2%E8%A6%96%E5%9C%96%E7%89%87%E2%80%93" title="–檢視圖片–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="6035" data-size="8">–檢視圖片–</span></h4>
<p data-position="6044" data-size="0"><span data-position="6069" data-size="51">將執行的起始位置分別切分為[0~399, 400~799, 800~1199]可以分別跑出如下圖的結果</span><br>
<img src="./Multi-thread Programming - HackMD_files/8GvO6NI.png" alt="" class="" data-position="6102" data-size="36" loading="lazy"><br>
<span data-position="6141" data-size="43">可以看到這三張圖也代表著Thread0, Thread1, Thread2處理的圖片。</span><br>
<span data-position="6187" data-size="39">中間的圖片代表瓶頸的位置，對比左右側兩張圖可以發現白色區塊比較多，對應的數值為</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-12-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-149" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-150" class="mjx-mrow"><span id="MJXc-Node-151" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-152" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-153" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-154" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-155" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-156" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-157" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-158" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-12">mandel()</script></span><span data-position="6236" data-size="5">最後回傳的</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-13-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-159" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-160" class="mjx-mrow"><span id="MJXc-Node-161" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-13">i</script></span><span data-position="6244" data-size="2">值，</span><strong data-position="6258" data-size="0"><span data-position="6248" data-size="17">白色對應灰階的數字為255，正好為</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-14-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-162" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-163" class="mjx-mrow"><span id="MJXc-Node-164" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-165" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-166" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-167" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-168" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-169" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-170" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-171" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-14">mandel()</script></span><span data-position="6275" data-size="5">回傳的極值</span></strong><span data-position="6282" data-size="15">(若count以256帶入)。</span><br>
<span data-position="6300" data-size="15">根據圖片與以上的分析可以得知，</span><strong data-position="6331" data-size="0"><span data-position="6317" data-size="13">只要白色區域越多計算越耗時</span></strong><span data-position="6332" data-size="1">。</span></p>
</li>
</ul><p class="part" data-startline="217" data-endline="217" data-position="6351" data-size="0"><em data-position="6351" data-size="0"><strong data-position="6351" data-size="0"><span data-position="6354" data-size="10">FOR VIEW 2</span></strong></em></p><ul class="part" data-startline="218" data-endline="305">
<li class="" data-startline="218" data-endline="240" data-position="6370" data-size="0">
<p data-position="6368" data-size="0"><span data-position="6370" data-size="9">2 Threads</span></p>
<pre><code class="s hljs">thread1 takes [<span class="hljs-number">114.644</span>] ms
thread0 takes [<span class="hljs-number">162.354</span>] ms  #
---
thread1 takes [<span class="hljs-number">114.347</span>] ms
thread0 takes [<span class="hljs-number">162.109</span>] ms  #
---
thread1 takes [<span class="hljs-number">114.588</span>] ms
thread0 takes [<span class="hljs-number">162.478</span>] ms  #
---
thread1 takes [<span class="hljs-number">114.438</span>] ms
thread0 takes [<span class="hljs-number">162.225</span>] ms  #
---
thread1 takes [<span class="hljs-number">114.478</span>] ms
thread0 takes [<span class="hljs-number">162.168</span>] ms  #
---
[mandelbrot thread]:            [<span class="hljs-number">162.142</span>] ms
<span class="hljs-symbol">Wrote</span> image file mandelbrot-thread.ppm
                                (<span class="hljs-number">1.67</span>x speedup from <span class="hljs-number">2</span> threads)
</code></pre>
<p data-position="6921" data-size="0"><span data-position="6925" data-size="2">因為</span><em data-position="6927" data-size="0"><strong data-position="6927" data-size="0"><span data-position="6930" data-size="6">VIEW 2</span></strong></em><span data-position="6939" data-size="1">在</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-15-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-172" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-173" class="mjx-mrow"><span id="MJXc-Node-174" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-175" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-176" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-177" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-178" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-179" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-15">main()</script></span><span data-position="6948" data-size="4">裡呼叫了</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-16-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-180" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-181" class="mjx-mrow"><span id="MJXc-Node-182" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">s</span></span><span id="MJXc-Node-183" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">c</span></span><span id="MJXc-Node-184" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-185" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-186" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-187" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em;">A</span></span><span id="MJXc-Node-188" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-189" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-190" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-191" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-192" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-193" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.501em; padding-right: 0.06em;">f</span></span><span id="MJXc-Node-194" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-195" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-196" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>A</mi><mi>n</mi><mi>d</mi><mi>S</mi><mi>h</mi><mi>i</mi><mi>f</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-16">scaleAndShift()</script></span><span data-position="6969" data-size="29">，對預設的x0, x1, y0, y1做scale與位移，</span><strong data-position="6998" data-size="0"><span data-position="7000" data-size="2">間接</span></strong><span data-position="7004" data-size="4"> 影響到</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-17-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-197" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-198" class="mjx-mrow"><span id="MJXc-Node-199" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-200" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-201" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-202" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-203" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-204" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-205" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">b</span></span><span id="MJXc-Node-206" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-207" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-208" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-209" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-210" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-211" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-212" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">i</span></span><span id="MJXc-Node-213" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-214" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-215" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-216" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mi>b</mi><mi>r</mi><mi>o</mi><mi>t</mi><mi>S</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-17">mandelbrotSerial()</script></span><span data-position="7028" data-size="19"> 17、18行對x、y所做的計算，使得</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-18-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-217" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-218" class="mjx-mrow"><span id="MJXc-Node-219" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">m</span></span><span id="MJXc-Node-220" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-221" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">n</span></span><span id="MJXc-Node-222" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-223" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-224" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">l</span></span><span id="MJXc-Node-225" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-226" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-18">mandel()</script></span><span data-position="7057" data-size="21">的演算法結果有所變動，也改變了瓶頸的位置。</span></p>
</li>
<li class="" data-startline="241" data-endline="267" data-position="7082" data-size="0">
<p data-position="7080" data-size="0"><span data-position="7082" data-size="9">3 Threads</span></p>
<pre><code class="s hljs">thread2 takes [<span class="hljs-number">74.479</span>] ms
thread1 takes [<span class="hljs-number">79.653</span>] ms
thread0 takes [<span class="hljs-number">124.814</span>] ms  #
---
thread2 takes [<span class="hljs-number">74.436</span>] ms
thread1 takes [<span class="hljs-number">79.594</span>] ms
thread0 takes [<span class="hljs-number">124.731</span>] ms  #
---
thread2 takes [<span class="hljs-number">74.456</span>] ms
thread1 takes [<span class="hljs-number">79.594</span>] ms
thread0 takes [<span class="hljs-number">124.480</span>] ms  #
---
thread2 takes [<span class="hljs-number">74.481</span>] ms
thread1 takes [<span class="hljs-number">79.577</span>] ms
thread0 takes [<span class="hljs-number">124.555</span>] ms  #
---
thread2 takes [<span class="hljs-number">74.357</span>] ms
thread1 takes [<span class="hljs-number">79.522</span>] ms
thread0 takes [<span class="hljs-number">124.340</span>] ms  #
---
[mandelbrot thread]:            [<span class="hljs-number">124.374</span>] ms
<span class="hljs-symbol">Wrote</span> image file mandelbrot-thread.ppm
                                (<span class="hljs-number">2.18</span>x speedup from <span class="hljs-number">3</span> threads)
</code></pre>
</li>
<li class="" data-startline="268" data-endline="305" data-position="7781" data-size="0">
<p data-position="7779" data-size="0"><span data-position="7781" data-size="9">4 Threads</span></p>
<pre><code class="s hljs">thread3 takes [<span class="hljs-number">57.600</span>] ms
thread1 takes [<span class="hljs-number">59.899</span>] ms
thread2 takes [<span class="hljs-number">60.127</span>] ms
thread0 takes [<span class="hljs-number">106.028</span>] ms  #
---
thread3 takes [<span class="hljs-number">57.444</span>] ms
thread1 takes [<span class="hljs-number">59.549</span>] ms
thread2 takes [<span class="hljs-number">60.085</span>] ms
thread0 takes [<span class="hljs-number">106.157</span>] ms  #
---
thread3 takes [<span class="hljs-number">57.477</span>] ms
thread1 takes [<span class="hljs-number">59.535</span>] ms
thread2 takes [<span class="hljs-number">60.078</span>] ms
thread0 takes [<span class="hljs-number">105.927</span>] ms  #
---
thread3 takes [<span class="hljs-number">57.563</span>] ms
thread1 takes [<span class="hljs-number">59.570</span>] ms
thread2 takes [<span class="hljs-number">60.106</span>] ms
thread0 takes [<span class="hljs-number">105.960</span>] ms  #
---
thread3 takes [<span class="hljs-number">57.436</span>] ms
thread1 takes [<span class="hljs-number">59.534</span>] ms
thread2 takes [<span class="hljs-number">60.099</span>] ms
thread0 takes [<span class="hljs-number">105.969</span>] ms  #
---
[mandelbrot thread]:            [<span class="hljs-number">105.964</span>] ms
<span class="hljs-symbol">Wrote</span> image file mandelbrot-thread.ppm
                        (<span class="hljs-number">2.55</span>x speedup from <span class="hljs-number">4</span> threads)
</code></pre>
<p data-position="8619" data-size="0"><span data-position="8623" data-size="1">由</span><em data-position="8624" data-size="0"><span data-position="8625" data-size="13">2,3,4 Threads</span></em><span data-position="8639" data-size="32">的結果可以發現，計算較耗時的區域被往前移了(原本為中間的區段)。</span></p>
<h4 class="" id="–檢視圖片–1" data-id="–檢視圖片–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%AA%A2%E8%A6%96%E5%9C%96%E7%89%87%E2%80%931" title="–檢視圖片–1" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="8681" data-size="8">–檢視圖片–</span></h4>
<p data-position="8690" data-size="0"><span data-position="8713" data-size="49">將執行的起始位置分別切分為[0~399, 400~799, 800~1199]可以寫出如下圖的結果</span><br>
<img src="./Multi-thread Programming - HackMD_files/qZpYQh0.png" alt="" class="" data-position="8746" data-size="36" loading="lazy"><br>
<span data-position="8785" data-size="58">可以觀察到大部分的白色移到上半部，代表瓶頸位移到前半部的計算，實驗後的結果也可得知Thread 0的計算負擔會上升。</span></p>
</li>
</ul><h4 class="part" data-startline="306" data-endline="306" id="圖二" data-id="圖二"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E5%9C%96%E4%BA%8C" title="圖二" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="8855" data-size="2">圖二</span></h4><p class="part" data-startline="307" data-endline="309" data-position="8858" data-size="0"><span data-position="8858" data-size="4">耗費時間</span><br>
<img src="./Multi-thread Programming - HackMD_files/EFDZ5FR.png" alt="" class="" data-position="8863" data-size="36" loading="lazy"><br>
<em data-position="8900" data-size="0"><strong data-position="8900" data-size="0"><span data-position="8903" data-size="6">VIEW 2</span></strong></em><span data-position="8912" data-size="3">對比於</span><em data-position="8915" data-size="0"><strong data-position="8915" data-size="0"><span data-position="8918" data-size="6">VIEW 1</span></strong></em><span data-position="8927" data-size="35">的結果，在時間上確實有跟著thread的上升而下降，但離理想的遞減目標</span><em data-position="8962" data-size="0"><strong data-position="8962" data-size="0"><span data-position="8965" data-size="12">VIEW 2 Ideal</span></strong></em><span data-position="8980" data-size="10">還有一段距離，原因跟</span><em data-position="8990" data-size="0"><strong data-position="8990" data-size="0"><span data-position="8993" data-size="6">VIEW 1</span></strong></em><span data-position="9002" data-size="18">是一樣的，都是因為有瓶頸的問題，只是</span><em data-position="9020" data-size="0"><strong data-position="9020" data-size="0"><span data-position="9023" data-size="6">VIEW 2</span></strong></em><span data-position="9032" data-size="24">總體的計算時間比較少，且切分區域的計算量差異沒有</span><em data-position="9056" data-size="0"><strong data-position="9056" data-size="0"><span data-position="9059" data-size="6">VIEW 1</span></strong></em><span data-position="9068" data-size="5">來的顯著。</span></p><h2 class="part" data-startline="311" data-endline="311" id="Q2" data-id="Q2"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q2" title="Q2" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="9078" data-size="3">Q2:</span></h2><blockquote class="part" data-startline="312" data-endline="312">
<p data-position="9084" data-size="0"><span data-position="9084" data-size="74">How do your measurements explain the speedup graph you previously created?</span></p>
</blockquote><p class="part" data-startline="314" data-endline="315" data-position="9160" data-size="0"><span data-position="9161" data-size="1">由</span><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#####%E5%9C%96%E4%B8%80" smoothhashscroll=""><span data-position="9162" data-size="2">圖一</span></a><span data-position="9174" data-size="6">可觀察到，在</span><em data-position="9180" data-size="0"><strong data-position="9180" data-size="0"><span data-position="9183" data-size="5">VIEW1</span></strong></em><span data-position="9191" data-size="48">時會因為中間區端的工作量較龐大，而造成thread的加速產生瓶頸，我們可以以圖片來做簡單的解釋。</span><br>
<span data-position="9240" data-size="78">在工作站的系統上使用的是 Intel® Core™ i5-7500 CPU @ 3.40GHz 4核心的處理器，因此我們圖片以4核作為解釋的基準。</span></p><h3 class="part" data-startline="316" data-endline="316" id="–圖示–" data-id="–圖示–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%9C%96%E7%A4%BA%E2%80%93" title="–圖示–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="9323" data-size="6">–圖示–</span></h3><ul class="part" data-startline="317" data-endline="343">
<li class="" data-startline="317" data-endline="325" data-position="9332" data-size="0">
<p data-position="9330" data-size="0"><span data-position="9332" data-size="9">2 Threads</span><br>
<span data-position="9344" data-size="82">根據之前分析的結果可得知，2個threads彼此被分配到的工作量是差不多的，所以理論上是可以加速到接近2倍的速度，也確實有達到近似值(1.95倍)，若以圖片來解釋:</span><br>
<img src="./Multi-thread Programming - HackMD_files/YE36AEv.png" alt="" class="" data-position="9429" data-size="36" loading="lazy"><br>
<span data-position="9468" data-size="7">兩個task的</span><strong data-position="9487" data-size="0"><span data-position="9477" data-size="15">顏色相同代表工作的負擔是一樣的</span></strong><span data-position="9494" data-size="24">，在CPU內是可以完美被分配到兩個Core上執行</span></p>
  <p class="aligncenter">
      <img src="./Multi-thread Programming - HackMD_files/HZ9vcwM.png" style="width: 70%">
  </p>
  至於該被分配到哪個core可能交由作業系統或硬體來決定。
</li>
<li class="" data-startline="326" data-endline="334" data-position="9674" data-size="0">
<p data-position="9672" data-size="0"><span data-position="9674" data-size="9">3 Threads</span><br>
<span data-position="9686" data-size="47">已知3個threads會有其中一個thread需要負責較繁重的工作，因此切分的工作會如下圖所示</span><br>
<img src="./Multi-thread Programming - HackMD_files/hiNiNDo.png" alt="" class="" data-position="9736" data-size="36" loading="lazy"><br>
<span data-position="9775" data-size="31">紅色代表較繁重的工作(中間區段的計算)，橘色分別代表前後區段。</span><br>
<span data-position="9809" data-size="10">分配的結果可能如下圖</span></p>
  <p class="aligncenter">
      <img src="./Multi-thread Programming - HackMD_files/Kor87NH.png" style="width: 70%">
  </p>
  可以看到左下角的Core負責較繁重的工作，也因此計算耗時相較於另外兩個Core更為耗時，當差異大到一定程度後將會嚴重影響效能，如之前的結果分析[圖一](#####圖一)在加速上反而小於2個Threads。
</li>
<li class="" data-startline="335" data-endline="343" data-position="10046" data-size="0">
<p data-position="10044" data-size="0"><span data-position="10048" data-size="9">4 Threads</span><br>
<span data-position="10060" data-size="58">跟3 Threads的結果很類似，不過因為是4個Core去分配工作，所以可以將原先中間區塊的部分再做劃分，如下圖所示</span><br>
<img src="./Multi-thread Programming - HackMD_files/FtoMjYx.png" alt="" class="" data-position="10121" data-size="36" loading="lazy"><br>
<span data-position="10160" data-size="39">中間的Task(咖啡色)是計算量較大的區塊，在Core分配工作的結果可能如下圖</span></p>
  <p class="aligncenter">
      <img src="./Multi-thread Programming - HackMD_files/awKF2U6.png" style="width: 70%">
  </p>
  左側的Core負責較多的計算，計算時間上也受到他們所影響，相比於3 Threads圖中左下Core的獨自奮鬥；4 Threads在兩個Core合作下，所需的耗時比3 Threads少上許多。
</li>
</ul><h3 class="part" data-startline="344" data-endline="344" id="–推論–" data-id="–推論–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%8E%A8%E8%AB%96%E2%80%93" title="–推論–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="10420" data-size="6">–推論–</span></h3><ul class="part" data-startline="345" data-endline="347">
<li class="" data-startline="345" data-endline="345" data-position="10429" data-size="0"><span data-position="10429" data-size="51">根據之前分析與圖示的結果得知，只要將中間複雜的部份切分出去給多個Core去執行，在時間上是會有提升的。</span></li>
<li class="" data-startline="346" data-endline="347" data-position="10483" data-size="0"><span data-position="10483" data-size="7">因為現在我們的</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-19-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-227" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-228" class="mjx-mrow"><span id="MJXc-Node-229" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-230" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-231" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-232" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-233" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-234" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-235" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-236" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-237" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-238" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-239" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-240" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-241" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-242" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-243" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-244" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-245" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-246" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-247" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-19">workerThreadStart()</script></span><span data-position="10511" data-size="70">的做法是根據"Thread"的數目去做資料的切割，那當Thread夠多使資料切的夠零散並分配給多個Core去執行，速度上很有可能會大幅提升。</span></li>
</ul><h3 class="part" data-startline="348" data-endline="348" id="–實驗–" data-id="–實驗–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%AF%A6%E9%A9%97%E2%80%93" title="–實驗–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="10587" data-size="6">–實驗–</span></h3><p class="part" data-startline="349" data-endline="349" data-position="10594" data-size="0"><span data-position="10594" data-size="74">以下根據不同的Thread數目去計算各個Thread的執行結果，為了方便資料的切割，選擇的Thread數目都會剛好整除1200(預設的總執行次數)。</span></p><ul class="part" data-startline="351" data-endline="432">
<li class="" data-startline="351" data-endline="421" data-position="10672" data-size="0">
<p data-position="10670" data-size="0"><span data-position="10672" data-size="9">8 Threads</span></p>
<pre><code class="s hljs">thread0 takes [<span class="hljs-number">7.300</span>] ms                                      
thread7 takes [<span class="hljs-number">7.399</span>] ms                                      
thread1 takes [<span class="hljs-number">38.345</span>] ms                                     
thread2 takes [<span class="hljs-number">95.790</span>] ms                                     
thread6 takes [<span class="hljs-number">83.738</span>] ms                                     
thread3 takes [<span class="hljs-number">125.478</span>] ms                                    
thread4 takes [<span class="hljs-number">118.143</span>] ms                                    
thread5 takes [<span class="hljs-number">123.153</span>] ms
---
thread0 takes [<span class="hljs-number">7.304</span>] ms                                      
thread7 takes [<span class="hljs-number">7.400</span>] ms                                      
thread1 takes [<span class="hljs-number">38.375</span>] ms                                     
thread6 takes [<span class="hljs-number">78.622</span>] ms                                     
thread5 takes [<span class="hljs-number">90.850</span>] ms                                     
thread2 takes [<span class="hljs-number">124.177</span>] ms                                    
thread3 takes [<span class="hljs-number">117.634</span>] ms                                    
thread4 takes [<span class="hljs-number">131.648</span>] ms 
---
thread0 takes [<span class="hljs-number">7.314</span>] ms                                      
thread7 takes [<span class="hljs-number">7.398</span>] ms                                      
thread1 takes [<span class="hljs-number">38.253</span>] ms                                     
thread6 takes [<span class="hljs-number">85.603</span>] ms                                     
thread5 takes [<span class="hljs-number">90.878</span>] ms                                     
thread2 takes [<span class="hljs-number">124.207</span>] ms                                    
thread3 takes [<span class="hljs-number">117.702</span>] ms                                    
thread4 takes [<span class="hljs-number">131.288</span>] ms  
---
thread0 takes [<span class="hljs-number">7.402</span>] ms                                      
thread7 takes [<span class="hljs-number">16.192</span>] ms                                     
thread1 takes [<span class="hljs-number">38.317</span>] ms                                     
thread6 takes [<span class="hljs-number">82.806</span>] ms                                     
thread5 takes [<span class="hljs-number">90.739</span>] ms                                     
thread2 takes [<span class="hljs-number">124.090</span>] ms                                    
thread3 takes [<span class="hljs-number">117.643</span>] ms                                    
thread4 takes [<span class="hljs-number">134.696</span>] ms 
---
thread0 takes [<span class="hljs-number">7.303</span>] ms                                      
thread7 takes [<span class="hljs-number">7.401</span>] ms                                      
thread1 takes [<span class="hljs-number">38.275</span>] ms                                     
thread6 takes [<span class="hljs-number">86.111</span>] ms                                     
thread5 takes [<span class="hljs-number">88.587</span>] ms                                     
thread2 takes [<span class="hljs-number">124.189</span>] ms                                    
thread3 takes [<span class="hljs-number">117.630</span>] ms                                    
thread4 takes [<span class="hljs-number">135.814</span>] ms                                    
[mandelbrot thread]:            [<span class="hljs-number">131.452</span>] ms                  
<span class="hljs-symbol">Wrote</span> image file mandelbrot-thread.ppm                        
                                (<span class="hljs-number">3.51</span>x speedup from <span class="hljs-number">8</span> threads)
</code></pre>
<p data-position="13472" data-size="0"><span data-position="13476" data-size="18">我們可以觀察到切分方式大致上會如下圖</span><br>
<img src="./Multi-thread Programming - HackMD_files/mgtecyy.png" alt="" class="" data-position="13497" data-size="36" loading="lazy"><br>
<span data-position="13536" data-size="23">計算複雜程度由小到大依序為: 綠&lt;藍&lt;黃&lt;橘。</span><br>
<span data-position="13562" data-size="34">Task由左而右由上到下分別對應分給Thread0~Thread7。</span><br>
<span data-position="13599" data-size="12">工作的分配上大致上會如下</span></p>
<ol data-position="13629" data-size="0">
<li class="" data-startline="407" data-endline="410" data-position="13632" data-size="0">
<p data-position="13625" data-size="0"><span data-position="13632" data-size="24">首先，Task由小到大會先依序分配給各個Core</span></p>
 <p class="aligncenter">
     <img src="./Multi-thread Programming - HackMD_files/dyH9IH0.png" style="width: 70%">
 </p>
</li>
<li class="" data-startline="411" data-endline="417" data-position="13785" data-size="0">
<p data-position="13778" data-size="0"><span data-position="13785" data-size="39">還有剩下4個Task，可能會被隨機分配到Core，與之前的Task做並行處理。</span><br>
<span data-position="13826" data-size="14">當分配的夠好的時候(如下圖)</span></p>
 <p class="aligncenter">
     <img src="./Multi-thread Programming - HackMD_files/ZIJRX7P.png" style="width: 70%">
 </p>
 Core間的工作量越接近時，對平行化的加速會更顯著。
</li>
<li class="" data-startline="418" data-endline="421" data-position="14020" data-size="0">
<p data-position="14013" data-size="0"><span data-position="14020" data-size="15">執行多次實驗後的加速程度如下圖</span><br>
<img src="./Multi-thread Programming - HackMD_files/86G5Bci.png" alt="" class="" data-position="14037" data-size="36" loading="lazy"><br>
<span data-position="14075" data-size="24">以8Threads為例大約可達到了3.5倍的加速</span></p>
</li>
</ol>
</li>
<li class="" data-startline="422" data-endline="428" data-position="14125" data-size="0">
<p data-position="14123" data-size="0"><span data-position="14125" data-size="10">16 Threads</span><br>
<span data-position="14138" data-size="50">根據8 Threads的結果我們可以推斷16 Threads在更細小的工作切分下應該會再進一步加速。</span><br>
<span data-position="14191" data-size="12">執行多次實驗後的結果如下</span><br>
<img src="./Multi-thread Programming - HackMD_files/MXqDoYs.png" alt="" class="" data-position="14206" data-size="36" loading="lazy"><br>
<span data-position="14245" data-size="25">以8Threads為例大約可達到了3.65倍的加速</span></p>
</li>
<li class="" data-startline="429" data-endline="432" data-position="14291" data-size="0">
<p data-position="14289" data-size="0"><span data-position="14291" data-size="10">30 Threads</span><br>
<span data-position="14304" data-size="41">最後將Threads開到最大可整除1200的數字"30"時執行多次實驗後的結果如下</span><br>
<img src="./Multi-thread Programming - HackMD_files/kZa7he3.png" alt="" class="" data-position="14348" data-size="36" loading="lazy"><br>
<span data-position="14387" data-size="56">速度已經來到了約3.72倍，但也似乎沒辦法再大幅度增快了，因為工作站是4核的CPU，理論上的最高速只能達到4倍。</span></p>
</li>
</ul><h3 class="part" data-startline="433" data-endline="433" id="–結論–" data-id="–結論–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E7%B5%90%E8%AB%96%E2%80%93" title="–結論–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="14454" data-size="6">–結論–</span></h3><div class="alert alert-info part" data-startline="434" data-endline="435" data-position="14461" data-size="42">
<p data-position="14469" data-size="0"><span data-position="14469" data-size="30">當Task被切分成越多份去執行時所產生的加速成果會越趨穩定。</span></p>
</div><p class="part" data-startline="437" data-endline="437" data-position="14504" data-size="0"><span data-position="14504" data-size="12">這結論也給了我們修改原本</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-20-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-248" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-249" class="mjx-mrow"><span id="MJXc-Node-250" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-251" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-252" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-253" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-254" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-255" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-256" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-257" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-258" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-259" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-260" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-261" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-262" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-263" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-264" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-265" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-266" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-267" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-268" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-20">workerThreadStart()</script></span><span data-position="14537" data-size="8">程式的idea。</span></p><h2 class="part" data-startline="439" data-endline="439" id="Q3" data-id="Q3"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q3" title="Q3" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="14554" data-size="2">Q3</span></h2><blockquote class="part" data-startline="440" data-endline="440">
<p data-position="14558" data-size="0"><span data-position="14558" data-size="107">In your write-up, describe your approach to parallelization and report the final 4-thread speedup obtained.</span></p>
</blockquote><h3 class="part" data-startline="441" data-endline="441" id="–改良想法–" data-id="–改良想法–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%94%B9%E8%89%AF%E6%83%B3%E6%B3%95%E2%80%93" title="–改良想法–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="14670" data-size="8">–改良想法–</span></h3><p class="part" data-startline="442" data-endline="442" data-position="14679" data-size="0"><span data-position="14679" data-size="82">依據上面Q2所得出的結論，我們可以將原本的程式碼改為將Task做極大成度的劃分，將原本的1200執行次數分成1200個小的區塊，然後將這些區塊依序排給Thread。</span></p><ul class="part" data-startline="443" data-endline="459">
<li class="" data-startline="443" data-endline="450" data-position="14764" data-size="0"><span data-position="14764" data-size="15">以2 Threads為例排法為</span><pre><code>切分成1200個Task 代號依序為0~1199

            分配到的工作代號
Thread0  0 2 4 6  ...  1198
Thread1  1 3 5 7  ...  1199
</code></pre>
</li>
<li class="" data-startline="451" data-endline="459" data-position="14917" data-size="0"><span data-position="14917" data-size="15">以3 Threads為例排法為</span><pre><code>切分成1200個Task 代號依序為0~1199

            分配到的工作代號
Thread0  0 3 6 9   ...  1197
Thread1  1 4 7 10  ...  1198
Thread2  2 5 8 11  ...  1199
</code></pre>
</li>
</ul><p class="part" data-startline="460" data-endline="461" data-position="15103" data-size="0"><span data-position="15103" data-size="37">這樣的排法有個優點，可以避免中間計算複雜的區塊只交給一個Thread處理。</span><br>
<span data-position="15141" data-size="20">且根據以上的結果我們可以推導出一個模式，</span></p><ol class="part" data-startline="462" data-endline="465" data-position="15162" data-size="0">
<li class="" data-startline="462" data-endline="462" data-position="15165" data-size="0"><span data-position="15165" data-size="31">每個Thread都是處理 1200/Thread個數 的資料。</span></li>
<li class="" data-startline="463" data-endline="465" data-position="15200" data-size="0"><span data-position="15200" data-size="42">該Thread的下一個被分配到的工作代號剛好是上一個工作代號 + Thread個數，</span><br>
<span data-position="15244" data-size="66">如3 Threads中，Thread 0處理的工作代號為0、3 (0 + Thread個數)、6 (3 + Thread個數)…</span></li>
</ol><p class="part" data-startline="466" data-endline="466" data-position="15315" data-size="0"><span data-position="15315" data-size="20">將以上的推導式化為程式後可以得到改良版的</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-21-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-269" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-270" class="mjx-mrow"><span id="MJXc-Node-271" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-272" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-273" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-274" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-275" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-276" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-277" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-278" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-279" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-280" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-281" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-282" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-283" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-284" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-285" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-286" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-287" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-288" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-289" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-21">workerThreadStart()</script></span></p><pre class="part" data-startline="467" data-endline="491" data-position="15357"><code class="cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span></div><div class="code"><span class="token keyword">void</span> <span class="token function">workerThreadStart</span><span class="token punctuation">(</span>WorkerArgs <span class="token operator">*</span><span class="token keyword">const</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>    
    <span class="token keyword">int</span> args_remain <span class="token operator">=</span> args<span class="token operator">-&gt;</span>height <span class="token operator">%</span> args<span class="token operator">-&gt;</span>numThreads<span class="token punctuation">;</span>
    <span class="token keyword">int</span> remain <span class="token operator">=</span> args_remain <span class="token operator">?</span> args_remain <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// 負責處理無法整除的餘數</span>
    <span class="token keyword">int</span> part <span class="token operator">=</span> args<span class="token operator">-&gt;</span>height <span class="token operator">/</span> args<span class="token operator">-&gt;</span>numThreads<span class="token punctuation">;</span>  <span class="token comment">// 對應以上的1.</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> part<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> start <span class="token operator">=</span> i <span class="token operator">*</span> args<span class="token operator">-&gt;</span>numThreads <span class="token operator">+</span> args<span class="token operator">-&gt;</span>threadId<span class="token punctuation">;</span> <span class="token comment">// 對應以上的2.</span>
        <span class="token function">mandelbrotSerial</span><span class="token punctuation">(</span>
            args<span class="token operator">-&gt;</span>x0<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>y0<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>x1<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>y1<span class="token punctuation">,</span> 
            args<span class="token operator">-&gt;</span>width<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>height<span class="token punctuation">,</span> start<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> 
            args<span class="token operator">-&gt;</span>maxIterations<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>output
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token operator">-&gt;</span>threadId <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> remain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> start <span class="token operator">=</span> part <span class="token operator">*</span> args<span class="token operator">-&gt;</span>numThreads <span class="token operator">+</span> args<span class="token operator">-&gt;</span>threadId<span class="token punctuation">;</span>
        <span class="token function">mandelbrotSerial</span><span class="token punctuation">(</span>
            args<span class="token operator">-&gt;</span>x0<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>y0<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>x1<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>y1<span class="token punctuation">,</span> 
            args<span class="token operator">-&gt;</span>width<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>height<span class="token punctuation">,</span> start<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> 
            args<span class="token operator">-&gt;</span>maxIterations<span class="token punctuation">,</span> args<span class="token operator">-&gt;</span>output
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</div></div></code></pre><p class="part" data-startline="492" data-endline="492" data-position="16196" data-size="0"><span data-position="16196" data-size="16">除了1.、2. 兩點外，改良版的</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-22-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-290" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-291" class="mjx-mrow"><span id="MJXc-Node-292" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-293" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-294" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-295" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-296" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-297" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-298" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-299" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-300" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-301" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-302" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-303" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-304" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-305" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-306" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-307" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-308" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-309" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-310" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-22">workerThreadStart()</script></span><span data-position="16233" data-size="21">也能對無法整除的Threads數目做處理。</span></p><h3 class="part" data-startline="494" data-endline="494" id="–分析–" data-id="–分析–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%88%86%E6%9E%90%E2%80%93" title="–分析–" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="16260" data-size="6">–分析–</span></h3><p class="part" data-startline="495" data-endline="496" data-position="16267" data-size="0"><span data-position="16267" data-size="6">執行改良後的</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-23-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-311" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-312" class="mjx-mrow"><span id="MJXc-Node-313" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-314" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-315" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-316" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-317" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-318" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-319" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-320" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-321" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-322" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-323" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-324" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-325" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-326" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-327" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-328" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-329" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-330" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-331" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-23">workerThreadStart()</script></span><span data-position="16294" data-size="4">結果如下</span><br>
<img src="./Multi-thread Programming - HackMD_files/XwtjVUH.png" alt="" class="" data-position="16299" data-size="36" loading="lazy"></p><p class="part" data-startline="498" data-endline="498" data-position="16337" data-size="0"><span data-position="16337" data-size="13">4 Threads的結果為</span></p><pre class="part" data-startline="499" data-endline="505" data-position="16351"><code class="s hljs">[mandelbrot serial]:            [<span class="hljs-number">460.891</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>serial.ppm
[mandelbrot thread]:            [<span class="hljs-number">121.658</span>] ms
Wrote image file mandelbrot<span class="hljs-operator">-</span>thread.ppm
                                (<span class="hljs-number">3</span>.79x speedup <span class="hljs-keyword">from</span> <span class="hljs-number">4</span> threads)
</code></pre><p class="part" data-startline="506" data-endline="506" data-position="16591" data-size="0"><span data-position="16591" data-size="65">3.79倍對比於之前的討論是目前最好的結果，且根據以前的推斷，在切分到夠小的情況下執行的結果應該更為穩定，以下為執行多次的實驗結果</span></p><p class="aligncenter">
    <img src="./Multi-thread Programming - HackMD_files/6FC59zp.png" style="width: 85%">
</p><p class="part" data-startline="511" data-endline="512" data-position="16755" data-size="0"><img src="./Multi-thread Programming - HackMD_files/OgMDaWD.png" alt="" class="" data-position="16755" data-size="36" loading="lazy"><br>
<span data-position="16792" data-size="38">結果應證了之前推斷，確實相當相當穩定，八次的結果都落在3.79或3.80倍。</span></p><h2 class="part" data-startline="514" data-endline="514" id="Q4" data-id="Q4"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q4" title="Q4" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="16835" data-size="2">Q4</span></h2><blockquote class="part" data-startline="515" data-endline="515">
<p data-position="16839" data-size="0"><span data-position="16839" data-size="198">Now run your improved code with eight threads. Is performance noticeably greater than when running with four threads? Why or why not? (Notice that the workstation server provides 4 cores 4 threads.)</span></p>
</blockquote><p class="part" data-startline="517" data-endline="518" data-position="17039" data-size="0"><span data-position="17040" data-size="25">系統能夠加速是根據Core個數而定(Intel 的</span><a href="https://zh.wikipedia.org/wiki/%E8%B6%85%E5%9F%B7%E8%A1%8C%E7%B7%92" target="_blank" rel="noopener"><span data-position="17065" data-size="15">Hyper-Threading</span></a><span data-position="17150" data-size="6">除外)，之前</span><a href="https://hackmd.io/@karta134033/r1Dwh9tuw##Q2" smoothhashscroll=""><span data-position="17156" data-size="2">Q2</span></a><span data-position="17165" data-size="29">會有Thread超過Core數目仍可使速度上升是因為原本的</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-24-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-332" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-333" class="mjx-mrow"><span id="MJXc-Node-334" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-335" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-336" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-337" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-338" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-339" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-340" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-341" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-342" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-343" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-344" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-345" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-346" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-347" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-348" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-349" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-350" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-351" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-352" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-24">workerThreadStart()</script></span><span data-position="17215" data-size="72">寫法是根據Thread數目去做工作劃分，會使速度提升純粹是工作被切分成多份後可以更平均的分配到各個Core(分配的決定權由作業系統處理)去執行。</span><br>
<span data-position="17288" data-size="4">改良後的</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-25-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-353" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-354" class="mjx-mrow"><span id="MJXc-Node-355" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-356" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-357" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-358" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-359" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-360" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-361" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-362" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-363" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-364" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-365" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-366" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-367" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-368" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-369" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-370" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-371" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-372" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-373" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-25">workerThreadStart()</script></span><span data-position="17313" data-size="2">已經</span><strong data-position="17315" data-size="0"><span data-position="17317" data-size="2">預先</span></strong><span data-position="17321" data-size="168">由程式做工作的分配，所以Thread的上升超過硬體可支援的上限時必定會有些Threads在同一個Core並行處理，儘管新增一個Thread所需要的系統資源是小於Process的，但隨著Thread數量的上升，分配系統資源給Thread所產生的overhead以及Task需要在同一個Core並行處理勢必為影響效能、速度上也可能不再穩定。</span></p><h3 class="part" data-startline="519" data-endline="519" id="–實驗–1" data-id="–實驗–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%AF%A6%E9%A9%97%E2%80%931" title="–實驗–1" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="17494" data-size="6">–實驗–</span></h3><p class="part" data-startline="520" data-endline="520" data-position="17501" data-size="0"><span data-position="17501" data-size="15">根據以上的論點可以做以下的實驗</span></p><ul class="part" data-startline="521" data-endline="524">
<li class="" data-startline="521" data-endline="521" data-position="17519" data-size="0"><span data-position="17519" data-size="9">8 Threads</span></li>
<li class="" data-startline="522" data-endline="522" data-position="17531" data-size="0"><span data-position="17531" data-size="10">16 Threads</span></li>
<li class="" data-startline="523" data-endline="524" data-position="17544" data-size="0"><span data-position="17544" data-size="10">30 Threads</span></li>
</ul><p class="part" data-startline="525" data-endline="529" data-position="17557" data-size="0"><span data-position="17557" data-size="13">對比4 Thread的結果</span><br>
<img src="./Multi-thread Programming - HackMD_files/tHF24hz.png" alt="" class="" data-position="17571" data-size="36" loading="lazy"><br>
<img src="./Multi-thread Programming - HackMD_files/AKWS6wU.png" alt="" class="" data-position="17608" data-size="36" loading="lazy"><br>
<span data-position="17645" data-size="59">8 Threads與16 Threads的極值雖然可以接近4 Threads，但確實相比於4 Threads較不穩定。</span><br>
<span data-position="17705" data-size="79">比較有趣的是在30 Threads的情況下結果又變得比較穩定，但能夠達到的極值離4 Threads有約0.03~0.04的差距，雖然結果變穩定但差距卻變大了。</span></p><h3 class="part" data-startline="531" data-endline="531" id="–推論–1" data-id="–推論–"><a class="anchor hidden-xs" href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%8E%A8%E8%AB%96%E2%80%931" title="–推論–1" smoothhashscroll=""><span class="octicon octicon-link"></span></a><span data-position="17790" data-size="6">–推論–</span></h3><p class="part" data-startline="532" data-endline="532" data-position="17797" data-size="0"><span data-position="17797" data-size="16">以下為30 Threads的推論</span></p><ul class="part" data-startline="533" data-endline="560">
<li class="" data-startline="533" data-endline="542" data-position="17816" data-size="0">
<p data-position="17814" data-size="0"><span data-position="17816" data-size="56">因為Task切給多個Thread執行，所以當下一個Thread要進來處理的時候可以讓Core間的執行時間比較接近</span></p>
  <p class="aligncenter">
      <img src="./Multi-thread Programming - HackMD_files/w9eCTPN.png" style="width: 70%">
  </p>
  計算所需的時間: 綠&lt;黃&lt;橘&lt;紅
  原本的Task為橘色，因為在Core執行一段時間後計算所需的時間變小而變成綠色，所以下一個時間點的Task進來的時候
  <p class="aligncenter">
      <img src="./Multi-thread Programming - HackMD_files/0naicMj.png" style="width: 70%">
  </p>
  各個Core的Loading是接近的，也因為Next Task所需的計算時間是由原本的Task被30個Thread切分，所以各個Core的計算時間比較不會有差異。
</li>
<li class="" data-startline="543" data-endline="560" data-position="18263" data-size="0">
<p data-position="18261" data-size="0"><span data-position="18263" data-size="11">對比於8 Thread</span><br>
<span data-position="18275" data-size="2">因為</span><em data-position="18279" data-size="0"><strong data-position="18279" data-size="0"><span data-position="18280" data-size="34">在8 Thread中各個Task所需計算的量是大於30Threads</span></strong></em><span data-position="18317" data-size="21"> ，所以很有可能在某個時間點會有下面的結果</span></p>
  <p class="aligncenter">
      <img src="./Multi-thread Programming - HackMD_files/M3rjyP7.png" style="width: 70%">
  </p>
  右上角的Core可能因為
  1. 比較晚接收到工作
  2. 作業系統上分配Task的順序問題
  3. 硬體的細微差異
<p data-position="18527" data-size="0"><span data-position="18531" data-size="12">因此還沒做到綠色的程度。</span><br>
<span data-position="18546" data-size="77">就如同A和B比賽跑，當都是跑50公尺的時候(如同30 Threads)差異不大，但當比賽跑200公尺(如同8 Threads)時A和B的差異可能就會上升。</span><br>
<span data-position="18626" data-size="17">而這時候下個時間點的Task進來了</span></p>
  <p class="aligncenter">
      <img src="./Multi-thread Programming - HackMD_files/VoUR1iH.png" style="width: 70%">
  </p>
  造成各個Core的計算時間的差異會依然存在，使得計算時間上有時候會不穩定。
</li>
</ul><p class="part" data-startline="561" data-endline="561" data-position="18804" data-size="0"><span data-position="18804" data-size="157">根據以上的推論可得知，30 Threads執行時間會穩定主要是工作被大幅度的切分了，Core在執行該工作的時間差異會比較小，而時間上的極限達不到4 Threads的程度主要還是開一個Thread對系統還是有Overhead的存在，因此不是開越多對系統就有幫助，主要還是要看要解決的問題是要怎麼做劃分為主，若以原先的</span><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-26-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-374" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-375" class="mjx-mrow"><span id="MJXc-Node-376" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-377" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-378" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-379" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-380" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-381" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-382" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-383" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-384" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-385" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-386" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-387" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-388" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-389" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-390" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-391" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-392" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-393" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-394" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-26">workerThreadStart()</script></span><span data-position="18982" data-size="21">作法，開多個Thread是有幫助的，但若以</span><strong data-position="19003" data-size="0"><span data-position="19005" data-size="3">改良版</span></strong><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-27-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-395" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-396" class="mjx-mrow"><span id="MJXc-Node-397" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">w</span></span><span id="MJXc-Node-398" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">o</span></span><span id="MJXc-Node-399" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-400" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">k</span></span><span id="MJXc-Node-401" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-402" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-403" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.12em;">T</span></span><span id="MJXc-Node-404" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em;">h</span></span><span id="MJXc-Node-405" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-406" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">e</span></span><span id="MJXc-Node-407" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-408" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.445em; padding-bottom: 0.279em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-409" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.501em; padding-bottom: 0.279em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-410" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-411" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">a</span></span><span id="MJXc-Node-412" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.224em; padding-bottom: 0.279em;">r</span></span><span id="MJXc-Node-413" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.39em; padding-bottom: 0.279em;">t</span></span><span id="MJXc-Node-414" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">(</span></span><span id="MJXc-Node-415" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.445em; padding-bottom: 0.611em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>T</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-27">workerThreadStart()</script></span><span data-position="19031" data-size="22">的作法，開多個Thread反而是沒有幫助的。</span></p></div>

    <div class="document-footer container-fluid hmd-pb-2 hidden-print">
        <div class="flex items-center justify-end -mb-5 text-right text-gray-500 text-3">
            <span>
                最後編輯：
                &nbsp;
            </span>

            
                <span class="ui-lastchangeuser h-[18px]" data-profile="karta134033" data-placement="left">
                    <a class="ui-user-icon inline-block w-[18px] h-[18px] m-0 user-card-popover" style="background-image: url(https://lh3.googleusercontent.com/-8t6tJ5N_q9k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKpEqiLF5J4yGnqMw6Ckn2daGTog/photo.jpg);" target="_blank" href="https://hackmd.io/@karta134033" data-toggle="popover" data-original-title="" title=""></a>
                </span>
            
        </div>

        <hr class="my-7.5">
        <div class="flex flex-col-reverse footer hmd-items-center sm:flex-row gap-[25px] sm:gap-0">
    <div class="flex-1 block h-full">
        <div class="flex gap-3">
    
        <span class="flex items-center justify-center ui-owner" data-placement="top" data-profile="karta134033">
             <a class="inline-block w-10 h-10 m-0 min-w-10 ui-user-icon user-card-popover" style="background-image: url(https://lh3.googleusercontent.com/-8t6tJ5N_q9k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKpEqiLF5J4yGnqMw6Ckn2daGTog/photo.jpg);" target="_blank" href="https://hackmd.io/@karta134033" data-toggle="popover" data-original-title="" title=""></a>
        </span>
    


    <div class="flex flex-col max-w-[303px] gap-1.5 justify-center items-start">
        
            <a class="font-bold ui-owner text-5 text-black-brand user-card-popover" hover:underline="" cursor-pointer"="" data-profile="karta134033" href="https://hackmd.io/@karta134033" data-toggle="popover" data-original-title="" title="">
                karta134033
            </a>
        

        
            <span class="text-gray-600 text-3">
                
            </span>
            
    </div>
</div>

    </div>

    <div class="footer__views">
        <span class="mr-4">
            <i class="fa fa-eye"></i> <span class="ui-viewcount" title="486">486</span>
        </span>

    
        <span class="community-button ui-like" data-toggle="tooltip" data-placement="top" title="" data-original-title="讚賞">
            <i class="fa fa-fw"></i>
            <span class="count"></span>
        </span>

        <span class="community-button ui-bookmark" data-toggle="tooltip" data-placement="top" title="" data-original-title="收藏">
            <i class="fa fa-fw"></i>
        </span>

        
            <div class="ui-notification dropup dropdown ">
                <span id="notificationLabel" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                    <div class="community-button" data-toggle="tooltip" data-placement="top" title="" data-original-title="訂閱">
                        <i class="fa fa-fw fa-bell"></i>
                    </div>
                </span>

                <ul class="dropdown-menu pull-right" aria-labelledby="notificationLabel">
                    <li class="ui-notification-watch notification-menu-item "><i class="fa fa-check fa-fw"></i><i class="fa fa-bell fa-fw"></i><div class="info"><div class="title">所有通知</div><div class="description">當有任何變更時將會收到通知</div></div></li>
                    <li class="ui-notification-mention notification-menu-item "><i class="fa fa-check fa-fw"></i><i class="fa fa-at fa-fw"></i><div class="info"><div class="title">提及我</div><div class="description">當有人提及我時才會收到通知</div></div></li>
                    <li class="divider"></li>
                    <!--
                        <li class="ui-notification-list notification-menu-item"><span><a href="#"><i class="fa fa-list-ul fa-fw"></i>我的訂閱列表</a></span></li>
                    -->
                    <li class="ui-notification-unsubscribe notification-menu-item">
                        <i class="fa fa-bell-slash-o fa-fw"></i>
                        取消訂閱
                    </li>
                </ul>
                <span class="ui-notification-subscribe community-button" data-toggle="tooltip" data-placement="top" title="" data-original-title="訂閱">
                    <i class="fa fa-fw fa-bell-o"></i>
                </span>
            </div>
        
    
    </div>
</div>

<section id="notes-recommendations">
    
        <hr class="my-7.5">

        <h3 class="mx-0 mb-[35px] text-gray-600 font-bold text-6">閱讀更多</h3>

        <div class="flex flex-col gap-5 sm:grid sm:grid-cols-2">
            
                <a class="pb-7.5 border-b border-gray-200 border-0 border-solid hover:no-underline active:no-underline focus:no-underline ui-recommendation-note" href="https://hackmd.io/@karta134033/Byv-aYzMS?utm_source=preview-mode&amp;utm_medium=rec" target="_blank" rel="noopener">
                    <h5 class="font-bold text-6 text-gray-850 my-0 mb-[5px]">Git Command</h5>

                    <p class="mb-0 leading-[20px] text-gray-500 break-words line-clamp-2 text-5">暫存修改的檔案
git stash   
git stash clear    # 清除暫存
git stash apply    # 加入最近的一次  

增加遠端連線
git remote add upstream git@github.com:gomaji/www.gomaji.com.git   

刪除改過的資料
</p>

                    <small class="mt-3 text-gray-600 text-3" data-moment="2021-10-15T00:45:08.368Z">2021年10月15日</small>
                </a>
            
                <a class="pb-7.5 border-b border-gray-200 border-0 border-solid hover:no-underline active:no-underline focus:no-underline ui-recommendation-note" href="https://hackmd.io/@karta134033/HJ4NmlaLL?utm_source=preview-mode&amp;utm_medium=rec" target="_blank" rel="noopener">
                    <h5 class="font-bold text-6 text-gray-850 my-0 mb-[5px]">資料庫助教課程  專題</h5>

                    <p class="mb-0 leading-[20px] text-gray-500 break-words line-clamp-2 text-5">課程影片
https://drive.google.com/file/d/1ikLY23qbJBHw7ysVpgQjqBIQEvAAKEOb/view?usp=sharing

Demo網址
主要以PC端網頁呈現為主，手機的版型未製作但功能仍可使用。
http://neil.nctu.me/php_project_demo/views/blog.php
註:此網頁內容與下面的專案是相同的，若遇到網頁無法開啟(server主機掛了)則請以以下的方式在local端開啟為主。

使用方法
</p>

                    <small class="mt-3 text-gray-600 text-3" data-moment="2021-06-26T05:26:04.843Z">2021年6月26日</small>
                </a>
            
                <a class="pb-7.5 border-b border-gray-200 border-0 border-solid hover:no-underline active:no-underline focus:no-underline ui-recommendation-note" href="https://hackmd.io/@karta134033/Sko49z6oU?utm_source=preview-mode&amp;utm_medium=rec" target="_blank" rel="noopener">
                    <h5 class="font-bold text-6 text-gray-850 my-0 mb-[5px]">PHP websocket</h5>

                    <p class="mb-0 leading-[20px] text-gray-500 break-words line-clamp-2 text-5">前置作業

到 https://github.com/qqqian0819/chatRoom 把專案載下來，將專案解壓縮到xampp/htdocs資料夾內

到以下位置點開php.ini

找到;extension=sockets的擴充指令,   然後把前面的 ";" 刪掉後儲存關閉

完成以上動作後重啟xampp
</p>

                    <small class="mt-3 text-gray-600 text-3" data-moment="2021-05-19T04:32:13.802Z">2021年5月19日</small>
                </a>
            
                <a class="pb-7.5 border-b border-gray-200 border-0 border-solid hover:no-underline active:no-underline focus:no-underline ui-recommendation-note" href="https://hackmd.io/@karta134033/rJm2caS6v?utm_source=preview-mode&amp;utm_medium=rec" target="_blank" rel="noopener">
                    <h5 class="font-bold text-6 text-gray-850 my-0 mb-[5px]">OpenCL Programming</h5>

                    <p class="mb-0 leading-[20px] text-gray-500 break-words line-clamp-2 text-5">Q1

(5 points): Explain your implementation. How do you optimize the performance of convolution?

--作法--

將傳輸資料量縮小
原本傳入的圖片為"float"型態，佔用空間為4bytes。
圖像處理中常見的型態為"uchar"，一般是指unsigned char，佔用空間為1bytes。
從助教的"readImage()"function也可以得知讀入的圖片是以uchar做儲存再轉為float，因此確實可以將"輸入"圖片轉為uchar的型態。</p>

                    <small class="mt-3 text-gray-600 text-3" data-moment="2021-01-13T15:40:44.235Z">2021年1月13日</small>
                </a>
            
        </div>

        
        

        
            <div class="text-center mt-[35px]">
                <a href="https://hackmd.io/@karta134033?utm_source=preview-mode&amp;utm_medium=rec" target="_blank" rel="noopener" class="font-bold text-gray-500 btn btn-default btn-md ui-recommendation-read-more">
                    閱讀更多 karta134033 的文章
                </a>
            </div>
        
    
</section>


<hr class="mt-7.5 mb-3.5">

<div class="footer text-[15px] text-gray-700 text-center">
    <span>發表於</span> <strong><a href="https://hackmd.io/" target="_blank"><i class="fa fa-file-text"></i> <span class="brand">HackMD</span></a></strong>
</div>

    </div>

    <div class="ui-community unselectable hidden-print hidden-xs" style="display: none; left: 849.5px;">
        
            <div class="community-button ui-like" title="" data-toggle="tooltip" data-placement="right" data-offset="0,5" data-original-title="讚賞"><i class="fa fa-fw"></i><div class="count"></div></div>
            <div class="community-button ui-bookmark" title="" data-toggle="tooltip" data-placement="right" data-offset="0,5" data-original-title="收藏"><i class="fa fa-fw"></i></div>
            
                <div class="ui-notification dropup dropdown " title="" data-toggle="tooltip" data-placement="right" data-offset="0,5" data-original-title="訂閱">
                    <div id="notificationLabel" class="community-button" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        <div class="ui-notification-status"><i class="fa fa-fw fa-bell"></i></div>
                    </div>
                    <ul class="dropdown-menu left" aria-labelledby="notificationLabel">
                        <li class="ui-notification-watch notification-menu-item "><i class="fa fa-check fa-fw"></i><i class="fa fa-bell fa-fw"></i><div class="info"><div class="title">所有通知</div><div class="description">當有任何變更時將會收到通知</div></div></li>
                        <li class="ui-notification-mention notification-menu-item "><i class="fa fa-check fa-fw"></i><i class="fa fa-at fa-fw"></i><div class="info"><div class="title">提及我</div><div class="description">當有人提及我時才會收到通知</div></div></li>
                        <li class="divider"></li>
                        <!--
                           <li class="ui-notification-list notification-menu-item"><span><a href="#"><i class="fa fa-list-ul fa-fw"></i>我的訂閱列表</a></span></li>
                        -->
                        <li class="ui-notification-unsubscribe notification-menu-item"><i class="fa fa-bell-slash-o fa-fw"></i>取消訂閱</li>
                    </ul>
                    <div class="ui-notification-subscribe community-button"><i class="fa fa-fw fa-bell-o"></i></div>
                </div>
            
        
    </div>

    <div class="ui-toc dropup unselectable hidden-print" style="display: none; left: 855.141px;">
        <div class="pull-left dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="https://hackmd.io/@karta134033/r1Dwh9tuw#" role="button" aria-haspopup="true" aria-expanded="false" title="目錄">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel"><div class="toc"><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Multi-thread-Programming" title="Multi-thread Programming" smoothhashscroll="">Multi-thread Programming</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q1" title="Q1" smoothhashscroll="">Q1</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93-%E5%88%86%E6%9E%90-%E2%80%93" title="– 分析 –" smoothhashscroll="">– 分析 –</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%AA%A2%E8%A6%96%E7%A8%8B%E5%BC%8F%E7%A2%BC%E2%80%93" title="–檢視程式碼–" smoothhashscroll="">–檢視程式碼–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%AA%A2%E8%A6%96Thread%E7%9A%84%E7%93%B6%E9%A0%B8%E2%80%93" title="–檢視Thread的瓶頸–" smoothhashscroll="">–檢視Thread的瓶頸–</a></li>
</ul>
</li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q2" title="Q2:" smoothhashscroll="">Q2:</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%9C%96%E7%A4%BA%E2%80%93" title="–圖示–" smoothhashscroll="">–圖示–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%8E%A8%E8%AB%96%E2%80%93" title="–推論–" smoothhashscroll="">–推論–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%AF%A6%E9%A9%97%E2%80%93" title="–實驗–" smoothhashscroll="">–實驗–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E7%B5%90%E8%AB%96%E2%80%93" title="–結論–" smoothhashscroll="">–結論–</a></li>
</ul>
</li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q3" title="Q3" smoothhashscroll="">Q3</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%94%B9%E8%89%AF%E6%83%B3%E6%B3%95%E2%80%93" title="–改良想法–" smoothhashscroll="">–改良想法–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%88%86%E6%9E%90%E2%80%93" title="–分析–" smoothhashscroll="">–分析–</a></li>
</ul>
</li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q4" title="Q4" smoothhashscroll="">Q4</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%AF%A6%E9%A9%97%E2%80%931" title="–實驗–" smoothhashscroll="">–實驗–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%8E%A8%E8%AB%96%E2%80%931" title="–推論–" smoothhashscroll="">–推論–</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="https://hackmd.io/@karta134033/r1Dwh9tuw#">全部展開</a><a class="back-to-top" href="https://hackmd.io/@karta134033/r1Dwh9tuw#">回到頂部</a><a class="go-to-bottom" href="https://hackmd.io/@karta134033/r1Dwh9tuw#">移至底部</a></div></ul>
        </div>
    </div>

    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print affix" data-spy="affix" style="top: 77px; left: 507.5px; width: 891.5px;"><div class="toc"><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Multi-thread-Programming" title="Multi-thread Programming" smoothhashscroll="">Multi-thread Programming</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q1" title="Q1" smoothhashscroll="">Q1</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93-%E5%88%86%E6%9E%90-%E2%80%93" title="– 分析 –" smoothhashscroll="">– 分析 –</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%AA%A2%E8%A6%96%E7%A8%8B%E5%BC%8F%E7%A2%BC%E2%80%93" title="–檢視程式碼–" smoothhashscroll="">–檢視程式碼–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%AA%A2%E8%A6%96Thread%E7%9A%84%E7%93%B6%E9%A0%B8%E2%80%93" title="–檢視Thread的瓶頸–" smoothhashscroll="">–檢視Thread的瓶頸–</a></li>
</ul>
</li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q2" title="Q2:" smoothhashscroll="">Q2:</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%9C%96%E7%A4%BA%E2%80%93" title="–圖示–" smoothhashscroll="">–圖示–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%8E%A8%E8%AB%96%E2%80%93" title="–推論–" smoothhashscroll="">–推論–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%AF%A6%E9%A9%97%E2%80%93" title="–實驗–" smoothhashscroll="">–實驗–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E7%B5%90%E8%AB%96%E2%80%93" title="–結論–" smoothhashscroll="">–結論–</a></li>
</ul>
</li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q3" title="Q3" smoothhashscroll="">Q3</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%94%B9%E8%89%AF%E6%83%B3%E6%B3%95%E2%80%93" title="–改良想法–" smoothhashscroll="">–改良想法–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%88%86%E6%9E%90%E2%80%93" title="–分析–" smoothhashscroll="">–分析–</a></li>
</ul>
</li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#Q4" title="Q4" smoothhashscroll="">Q4</a><ul class="nav">
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E5%AF%A6%E9%A9%97%E2%80%931" title="–實驗–" smoothhashscroll="">–實驗–</a></li>
<li><a href="https://hackmd.io/@karta134033/r1Dwh9tuw#%E2%80%93%E6%8E%A8%E8%AB%96%E2%80%931" title="–推論–" smoothhashscroll="">–推論–</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="https://hackmd.io/@karta134033/r1Dwh9tuw#">全部展開</a><a class="back-to-top" href="https://hackmd.io/@karta134033/r1Dwh9tuw#">回到頂部</a><a class="go-to-bottom" href="https://hackmd.io/@karta134033/r1Dwh9tuw#">移至底部</a></div></div>
    

    <div class="clearfix"></div>

    <!-- signin modal -->
<div class="modal fade signin-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: 10px; right: 20px; position: absolute;"><span aria-hidden="true">×</span></button>
            






    







<h3>登入</h3>

<form data-toggle="validator" role="form" class="form-horizontal" method="post" enctype="application/x-www-form-urlencoded" id="signin-form" novalidate="true" data-bitwarden-watching="1">
    <div class="hmd-dn"><input type="hidden" name="_csrf" value="RORxHmfL-eV8ZJhIvqmkEgqYnRvEDxpWASoI"></div>
    <div class="hmd-dn"><input type="hidden" name="create_team" value="false"></div>
    <div class="hmd-dn"><input type="hidden" name="create_paid_team" value="false"></div>
    <div class="form-group  ">
        <label for="email" class="control-label">Email</label>
        <label for="inputEmail" class="control-label pull-right errors">
            
        </label>
        <span class="help-block control-label with-errors pull-right" style="display: inline;"></span>
        <div class="input-block">
            
                <input type="email" class="form-control" name="email" placeholder="您的 Email" required="" autocomplete="email">
            
            <span class="error-sign"></span>
        </div>
    </div>
    <div class="form-group ">
        <label for="password" class="control-label">密碼</label>
        <label for="inputPassword" class="control-label pull-right errors">
            
        </label>
        <span class="help-block control-label with-errors pull-right" style="display: inline;"></span>
        <div class="input-block">
            <input type="password" class="form-control" name="password" placeholder="您的密碼" required="" autocomplete="current-password">
            <span class="error-sign"></span>
            
                <span class="control-label pull-right" style="font-size: 13px; margin-top: 5px;"><a href="https://hackmd.io/settings/forgotPassword" style="text-decoration: underline;">忘記密碼</a></span>
            
        </div>
    </div>

    <div style="text-align: center; padding-top: 15px; margin-bottom: 0px;">
        
            <input type="submit" class="btn btn-success btn-large disabled" formaction="https://hackmd.io/login" value="登入" disabled="">
        

        
    </div>
</form>








    
        <p class="separator">或是</p>
    

    
        <p>繼續登入，代表您同意<a href="https://hackmd.io/s/terms" target="_blank">服務條款</a>。</p>
    

    








 



<script id="gsi-client" src="./Multi-thread Programming - HackMD_files/client" async="" defer="" nonce=""></script>
<script nonce="">
    function handleCredentialResponse(response) {
        const form = document.getElementById('sign-in-with-google-form')
        form.children.credential.value = response.credential
        form.children.method.value = location.href.toLowerCase() === 'https://hackmd.io/settings#general' ? 'merge' : 'login'
        form.submit()
    }
    var GSI_READY = new Promise(function (resolve) {
        function initialize () {
            google.accounts.id.initialize({
                client_id: '911617723593-drikdibvvn63slfd6kbqigo8ql1no55s.apps.googleusercontent.com',
                callback: handleCredentialResponse
            })
            const loginPath = 'https://hackmd.io/login'
            const joinPath = 'https://hackmd.io/join'
            const renderButton = function () {
                google.accounts.id.renderButton(
                    document.getElementById('sign-in-with-google-button'),
                    { type: 'standard', width: 250 }
                )
            }
            if (location.href.toLowerCase() === loginPath || location.href.toLowerCase() === joinPath) {
                renderButton()
            } else {
                $('.signin-modal').one('shown.bs.modal', function () {
                    renderButton()
                })
            }
            resolve()
        }

        window.addEventListener('load', function () { initialize() })
    })
</script>
<form class="hidden" id="sign-in-with-google-form" action="https://hackmd.io/auth/google" method="post">
    <input type="hidden" name="credential">
    <input type="hidden" name="method">
</form>
 

<div class="social-buttons-container">
    
    <div id="sign-in-with-google-button"></div>
    
    
    <a href="https://hackmd.io/auth/facebook" class="btn btn-lg btn-block btn-social btn-facebook">
        <i class="fa fa-facebook"></i> 透過 Facebook 登入
    </a>
    
    
    <a href="https://hackmd.io/auth/twitter" class="btn btn-lg btn-block btn-social btn-twitter">
        <i class="fa fa-twitter"></i> 透過 Twitter 登入
    </a>
    
    
    <a href="https://hackmd.io/auth/github" class="btn btn-lg btn-block btn-social btn-github">
        <i class="fa fa-github"></i> 透過 GitHub 登入
    </a>
    
    
    <a href="https://hackmd.io/auth/dropbox" class="btn btn-lg btn-block btn-social btn-dropbox">
        <i class="fa fa-dropbox"></i> 透過 Dropbox 登入
    </a>
    
    
    
</div>





    <div>
        <p>第一次使用 HackMD？ <a href="https://hackmd.io/join">註冊</a></p>
    </div>


            

<style>
  .grecaptcha-badge {
      z-index: 1051;
  }
</style>
<script nonce="">
function lazyLoadRecaptcha () {
  document.querySelector('#signin-form input[type="submit"]').disabled = true

  const siteKey = '6LdtkK4ZAAAAAG1B4iENhmQTce1xNTyHu0GjgnXi'
  const lang = 'zh-TW'
  const src = `https://www.google.com/recaptcha/api.js?render=${siteKey}&hl=${lang}&onload=recaptchaOnloadCallback`

  const observer = new MutationObserver(mutations => {
    if (mutations[0].target.classList.contains('in')) {
      observer.disconnect()
      const head = document.querySelector('head')
      const script = document.createElement('script')
      script.setAttribute('nonce', '63f908c5-0dc0-4beb-977d-66607aba2917')
      script.type = 'text/javascript'
      script.src = src
      head.appendChild(script)
    }
  })
  observer.observe(document.querySelector('.signin-modal'), { attributeFilter: ['class'] })
}

function recaptchaOnloadCallback () {
  const siteKey = '6LdtkK4ZAAAAAG1B4iENhmQTce1xNTyHu0GjgnXi'
  grecaptcha.ready(function() {
    document.querySelector('#signin-form input[type="submit"]').disabled = false
    grecaptcha.execute(siteKey, {action: 'login'}).then(function(token) {
      recaptchaCallback(token)
    })
  })
}

function recaptchaCallback (token) {
  const badge = document.querySelector('.grecaptcha-badge')
  const modal = $('.signin-modal')
  modal.on('shown.bs.modal', function() {
      badge.style.visibility = 'visible'
  })
  modal.on('hidden.bs.modal', function() {
      badge.style.visibility = 'hidden'
  })

  var input = document.createElement('input');
  input.setAttribute('type', 'hidden');
  input.setAttribute('name', 'g-recaptcha-response');
  input.setAttribute('value', token);
  document.getElementById('signin-form').appendChild(input);
}

lazyLoadRecaptcha ()
</script>


        </div>
    </div>
</div>

    
    <script src="./Multi-thread Programming - HackMD_files/js"></script>
    <script nonce="">
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        let userid = (document.cookie.match('(^|; )userid=([^;]*)')||0)[2];
        gtag('config', 'UA-60728495-1', {'user_id': userid});
        
    </script>


    
<script src="./Multi-thread Programming - HackMD_files/bundle.min.js.下載" crossorigin="anonymous"></script>
<script nonce="">Sentry.init({ dsn: 'https://73410f1915d84abc8b2dd1f1aabd1c82@sentry.hackmd.dev/4', environment: 'production', integrations: function (intrus) { return intrus.filter(function (itr) { return itr.name !== 'TryCatch' }) } });</script>


    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLW9Z3"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->



    <script src="./Multi-thread Programming - HackMD_files/i18n.js.下載"></script>
     <script src="./Multi-thread Programming - HackMD_files/font-vendor.cfc9bbf7f59a24c7e6c4.js.下載" defer="defer"></script><script src="./Multi-thread Programming - HackMD_files/common-vendor.4fb39488e38e07ad876b.js.下載" defer="defer"></script><script src="./Multi-thread Programming - HackMD_files/pretty-vendor.ae927cc636c64832c2ad.js.下載" defer="defer"></script><script src="./Multi-thread Programming - HackMD_files/pretty-common.f2bb7062872855109188.js.下載" defer="defer"></script><script src="./Multi-thread Programming - HackMD_files/pretty.336d9995eaac673f4a99.js.下載" defer="defer"></script>

    



<div class="ReactModalPortal"></div><div class="ReactModalPortal"></div><div class="ReactModalPortal"></div></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>